{"version":3,"file":"runtime-dom.esm-bundler.js","sources":["../../shared/src/index.ts","../src/nodeOps.ts","../src/modules/attribute.ts","../src/modules/class.ts","../src/modules/event.s.ts","../src/modules/style.ts","../src/patchProp.ts","../../runtime-core/src/vnode.ts","../../runtime-core/src/apiCreateApp.ts","../../runtime-core/src/componentPublicInstanceProxyJandlers.ts","../../runtime-core/src/component.ts","../../reactivity/src/effect.ts","../../reactivity/src/baseHandlers.ts","../../reactivity/src/reactive.ts","../../reactivity/src/ref.ts","../../reactivity/src/computed.ts","../../runtime-core/src/schedule.ts","../../runtime-core/src/getSequence.ts","../../runtime-core/src/renderer.ts","../../runtime-core/src/h.ts","../src/index.ts"],"sourcesContent":["\r\nexport const isObject = (value) => typeof value == 'object' && value !== null //判断是否是对象\r\n\r\nexport const extend = Object.assign //对象合并\r\n\r\nexport const isArray = Array.isArray\r\nexport const isFunction = (value) => typeof value == 'function'\r\nexport const isNumber = (value) => typeof value == 'number'\r\nexport const isString = (value) => typeof value == 'string'\r\n\r\nexport const isIntegerKey = (key) => parseInt(key) + '' === key //判断是不是数字\r\n\r\nlet hasOwnProperty = Object.prototype.hasOwnProperty\r\nexport const hasOwn = (target, key) => hasOwnProperty.call(target, key) //判断key是不是target属性\r\n\r\nexport const hasChanged = (oldValue, value) => oldValue !== value\r\n\r\nexport { ShapeFlags } from \"./shapeFlag\"\r\n","//元素操作\r\n\r\nexport const nodeOps = {\r\n  //新增元素\r\n  createElement: (tarNanme) => document.createElement(tarNanme),\r\n\r\n  //删除元素\r\n  remove: (child) => {\r\n    if (child) {\r\n      const parent = child.parentNode\r\n      if (parent) {\r\n        parent.removeChild(child)\r\n      }\r\n    }\r\n  },\r\n\r\n  //插入元素\r\n  insert: (child, parent, anchor = null) => {\r\n    parent.insertBefore(child, anchor) //插入到parent内的anchor之前，anchor为空则等于appendChild\r\n  },\r\n\r\n  //获取元素\r\n  querySelector: (selector) => document.querySelector(selector),\r\n\r\n  //设置元素内容\r\n  setElementText: (el, text) => (el.textContent = text),\r\n\r\n  //创建文本\r\n  createText: (text) => document.createTextNode(text),\r\n\r\n  //设置文本内容\r\n  setText: (node, text) => (node.nodeValue = text),\r\n\r\n  //获取元素的下一个节点\r\n  nextSibling: (node) => node.nextSibling,\r\n}\r\n","//属性\r\n\r\nexport const patchAttr = (el, key, nextValue) => {\r\n  if (nextValue == null) {\r\n    el.removeAttribute(key)\r\n  } else {\r\n    el.setAttribute(key, nextValue)\r\n  }\r\n}\r\n","// 类\r\n\r\nexport const patchClass = (el, nextValue) => {\r\n  if (nextValue == null) {\r\n    nextValue = ''\r\n  }\r\n  el.calassName = nextValue\r\n}\r\n","// 事件\r\n                          //元素,事件名,触发事件的回调函数\r\nexport const patchEvents = (el, key, nextValue) => {\r\n  const invokers = el._vei || (el._vei = {})//在元素上创建一个事件列表\r\n  const exists = invokers[key]//看看要绑定的事件存不存在\r\n  if (nextValue && exists) {//如果我要绑定事件,且缓存表里有,那么就直接覆盖\r\n    exists.value = nextValue\r\n  } else {//如果我不绑定事件,或者绑定的事件没有绑定过\r\n\r\n    const eventName = key.slice(2).toLowerCase()\r\n\r\n    //如果我想绑定事件,但是事件没绑定过\r\n    if (nextValue) {\r\n      // 添加事件\r\n      let invoker = (invokers[key] = createInvoker(nextValue))\r\n      el.addEventListener(eventName, invoker)\r\n    } else {\r\n      //删除事件\r\n      el.removeEventListener(eventName, exists)\r\n      invokers[eventName] = undefined\r\n    }\r\n  }\r\n}\r\n\r\nfunction createInvoker(value) {\r\n  const invoker = (e) => {\r\n    invoker.value(e)\r\n  }\r\n  invoker.value = value\r\n  return invoker\r\n}\r\n","//样式\r\n\r\nexport const patchStyle = (el, prevValue, nextValue) => {\r\n  const style = el.style\r\n  if (nextValue == null) {\r\n    el.removeAttribute('style')\r\n  } else {\r\n    // 查看新的有没有老的\r\n    if (prevValue) {\r\n      for (let key in prevValue) {\r\n        if (nextValue[key] == null) {//老的有新的没有,删除\r\n          style[key] = ''\r\n        }\r\n      }\r\n    }\r\n\r\n    //新的赋值到老的\r\n    for (let key in nextValue) {\r\n      style[key] = nextValue[key]\r\n    }\r\n  }\r\n}\r\n","//一系列属性操作\r\n\r\nimport { patchAttr } from './modules/attribute'\r\nimport { patchClass } from './modules/class'\r\nimport { patchEvents } from './modules/event.s'\r\nimport { patchStyle } from './modules/style'\r\n\r\nexport const patchProp = (el, key, prevValue, nextValue) => {\r\n  switch (key) {\r\n    case 'class':\r\n      patchClass(el, nextValue)\r\n      break\r\n    case 'style':\r\n      patchStyle(el, prevValue, nextValue)\r\n      break\r\n    default:\r\n      if (/^on[^a-z]/.test(key)) {//以on开头,下一个大写就是事件\r\n        patchEvents(el,key,nextValue)\r\n      } else {\r\n        patchAttr(el, key, nextValue)\r\n      }\r\n      break\r\n  }\r\n}\r\n","//创建虚拟节点\r\n\r\nimport { isArray, isObject, isString, ShapeFlags } from '@vue/shared'\r\n\r\nexport function isVnode(vnode) {\r\n  return vnode.___v_idVnode\r\n}\r\n\r\nexport const createVnode = (type, props, children = null) => {\r\n  // 根据type判断是元素还是组件,字符串是元素，对象是组件\r\n  const shapeFlag = isString(type)\r\n    ? ShapeFlags.ELEMENT\r\n    : isObject(type)\r\n    ? ShapeFlags.STATEFUL_COMPONENT\r\n    : 0\r\n\r\n  // 虚拟节点\r\n  const vnode = {\r\n    ___v_idVnode: true, //是否是vnode节点\r\n    type,\r\n    props,\r\n    children,\r\n    component: null, //组件的实例\r\n    el: null, //对应的真实节点\r\n    key: props && props.key, //diff算法用的key\r\n    shapeFlag,\r\n  }\r\n  //判断儿子类型，如果有多个节点，那就是数组，\r\n  normalizeChildren(vnode, children)\r\n\r\n  return vnode\r\n}\r\n\r\nfunction normalizeChildren(vnode, children) {\r\n  let type = 0\r\n  if (children == null) {\r\n  } else if (isArray(children)) {\r\n    type = ShapeFlags.ARRAY_CHILDREN\r\n  } else {\r\n    type = ShapeFlags.TEXT_CHILDREN\r\n  }\r\n  //根据孩子类型，改变shapFlag，|的作用就是说明他既是某个类型又是某个类型，这是根据位运算的特性得出的结论算法\r\n  vnode.shapeFlag = vnode.shapeFlag | type\r\n}\r\n\r\nexport const Text = Symbol('TEXT')\r\nexport function normalizeVnode(child) {\r\n  if (isObject(child)) {\r\n    return child\r\n  }\r\n  return createVnode(Text, null, String(child))\r\n}\r\n","import { createVnode } from \"./vnode\"\r\n\r\nexport function createAppAPI(render) {\r\n  return function createApp(rootComponent, rootProps) {\r\n    //渲染哪个组件哪个属性\r\n    const app = {\r\n      __prop: rootProps,\r\n      __component: rootComponent,\r\n      __container: null,\r\n      mount(container) {//挂载目的地\r\n        \r\n        // 创建虚拟节点\r\n        let vnode = createVnode(rootComponent,rootProps)\r\n        render(vnode, container)\r\n\r\n      },\r\n    }\r\n    return app\r\n  }\r\n}\r\n","import { hasOwn } from '@vue/shared'\r\n\r\nexport const PublicInstanceProxyJandlers = {\r\n  get({ _: instance }, key) {\r\n    //取值的时候就可以访问setUpState，props，data里的内容了\r\n    const { setupState, props, data } = instance\r\n    if ((key[0] == '$')) {\r\n      return ''\r\n    }\r\n    if (hasOwn(setupState, key)) {\r\n      return setupState[key]\r\n    } else if (hasOwn(props, key)) {\r\n      return props[key]\r\n    } else if (hasOwn(data, key)) {\r\n      return data[key]\r\n    } else {\r\n      return undefined\r\n    }\r\n  },\r\n  set({ _: instance }, key, value) {\r\n    const { setupState, props, data } = instance\r\n    if (hasOwn(setupState, key)) {\r\n      setupState[key] = value\r\n    } else if (hasOwn(props, key)) {\r\n      props[key] = value\r\n    } else if (hasOwn(data, key)) {\r\n      data[key] = value\r\n    }\r\n    return true\r\n  },\r\n}\r\n","//关于组件的方法\r\n\r\nimport { isFunction, isObject, ShapeFlags } from '@vue/shared'\r\nimport { PublicInstanceProxyJandlers } from './componentPublicInstanceProxyJandlers'\r\n\r\nexport function createComponentInstance(vnode) {\r\n  //创建组件实例\r\n  const instance = {\r\n    vnode,\r\n    type: vnode.type,\r\n    props: { a: 1 },\r\n    attrs: {},\r\n    slots: {},\r\n    data: { b: 2 },\r\n    ctx: {},\r\n    setupState: { c: 3 }, //setup返回一个对象，这个对象会作为setUpState\r\n    isMounted: false, //是否挂载过\r\n  }\r\n  instance.ctx = { _: instance }\r\n  return instance\r\n}\r\n\r\nexport function setupComponent(instance) {\r\n  //解析实例\r\n  const { props, children } = instance.vnode\r\n\r\n  instance.props = props\r\n  instance.children = children\r\n\r\n  // 根据位运算，看当前组件类型\r\n  let isStateFul = instance.vnode.shapeFlag & ShapeFlags.STATEFUL_COMPONENT\r\n  if (isStateFul) {\r\n    //如果是带状态组件\r\n    //调用当前实例的setup方法填充setupState和render\r\n    setupStatefulComponent(instance)\r\n  }\r\n}\r\n\r\nfunction setupStatefulComponent(instance) {\r\n  // 1.代理 传递给render函数的参数\r\n  instance.proxy = new Proxy(instance.ctx, PublicInstanceProxyJandlers as any)\r\n  // 2.获取组件类型，拿到组件setup方法\r\n  let Component = instance.type\r\n  let { setup } = Component\r\n\r\n  if (setup) {\r\n    let setupContext = createSetupContext(instance)\r\n    const setupResult = setup(instance.props, setupComponent) //执行setup，并且传递参数\r\n    handlerSetupResult(instance, setupResult)\r\n  } else {\r\n    finishComponentSetup(instance) //完成组件的启动\r\n  }\r\n}\r\nfunction handlerSetupResult(instance, setupResult) {\r\n  // 根据setup返回结果，把结果放到不同的地方\r\n  if (isFunction(setupResult)) {\r\n    instance.render = setupResult\r\n  } else if (isObject(setupResult)) {\r\n    instance.setupState = setupResult\r\n  }\r\n  finishComponentSetup(instance)\r\n}\r\nfunction finishComponentSetup(instance) {\r\n  let Component = instance.type\r\n  if (!instance.render) {\r\n    //对template模板进行编译，产生render函数\r\n    if (!Component.render && Component.template) {\r\n    }\r\n    instance.render = Component.render\r\n  }\r\n}\r\n\r\n//创建上下文\r\nfunction createSetupContext(instance) {\r\n  return {\r\n    attrs: instance.attrs,\r\n    slots: instance.slots,\r\n\r\n    emit: () => {},\r\n    expose: () => {},\r\n  }\r\n}\r\n","import { isArray, isIntegerKey } from '@vue/shared'\r\nimport { TriggerOrTypes } from './operators'\r\n\r\nexport function effect(fn, options: any = {}) {\r\n  //effect变成响应式的，数据变化重新执行\r\n\r\n  const effect = createReactiveEffect(fn, options)\r\n\r\n  if (!options.lazy) {\r\n    effect() //默认会自动执行一次\r\n  }\r\n  return effect //有点类似vue2的watcher\r\n}\r\n\r\nlet uid = 0 //每个effect都有一个id\r\nlet activeEffect //存储当前effect，像是vue2全局存储的watcher一样\r\nconst effectStack = [] //熟悉的watcher栈，先入后出，先执行最后一个\r\nfunction createReactiveEffect(fn, options) {\r\n  const effect = function reactiveEffect() {\r\n    if (!effectStack.includes(effect)) {\r\n      //先看看栈里有没有一样的，有过就不执行了(防止 变量++ 这样的情况等)\r\n      try {\r\n        effectStack.push(effect) //通过全局栈，拿到effect本身存入栈\r\n        activeEffect = effect //通过全局变量，拿到effect本身，在track就能用effect了\r\n        return fn()\r\n      } finally {\r\n        effectStack.pop() //执行完抛出栈\r\n        activeEffect = effectStack[effectStack.length - 1] //重新指向最外一个\r\n      }\r\n    }\r\n  }\r\n  effect.id = uid++ //effect的id\r\n  effect._isEffect = true //标识是响应式effect\r\n  effect.raw = fn //保留对应的原函数\r\n  effect.options = options //保存用户选项\r\n  return effect\r\n}\r\n\r\n//track类似vue2的dep\r\nconst targetMap = new WeakMap()\r\nexport function track(target, type, key) {\r\n  if (activeEffect === undefined) {\r\n    return\r\n  }\r\n  // 往当前weaWap查找有没有相同的键值对\r\n  let depsMap = targetMap.get(target)\r\n  if (!depsMap) {\r\n    //没有相同的，设立一个键，并且值是一个map\r\n    targetMap.set(target, (depsMap = new Map()))\r\n  }\r\n  let dep = depsMap.get(key)\r\n  if (!dep) {\r\n    //往刚刚从weakmap取出的map查找有没有相同的键值对\r\n    depsMap.set(key, (dep = new Set())) //没有相同的，设立一个键，并且值是一个set\r\n  }\r\n  //如果map里找到的set里没有当前effect，那就加入\r\n  if (!dep.has(activeEffect)) {\r\n    dep.add(activeEffect)\r\n  }\r\n}\r\n\r\nexport function trigger(target, type, key?, newValue?, oldValue?) {\r\n  //没收集过，直接返回\r\n  const depsMap = targetMap.get(target)\r\n  if (!depsMap) return\r\n\r\n  //把所有要执行的effect放到集合，最后一起执行\r\n  const effects = new Set()\r\n  const add = (effectToAdd) => {\r\n    if (effectToAdd) {\r\n      effectToAdd.forEach((effect) => effects.add(effect))\r\n    }\r\n  }\r\n  //对修改数组的length属性特殊处理\r\n  if (key === 'length' && isArray(target)) {\r\n    depsMap.forEach((dep, key) => {\r\n      debugger\r\n      console.log(depsMap, dep, key)\r\n      if (key === 'length' || key > newValue) {\r\n        //如果依赖收集过的值是‘length’或者[2]这样的，且修改的length小于了收集过的索引\r\n        add(dep) //加到集合\r\n      }\r\n    })\r\n  } else {\r\n    if (key !== undefined) {\r\n      //修改\r\n      add(depsMap.get(key))\r\n    }\r\n    switch (type) {\r\n      case TriggerOrTypes.ADD:\r\n        if (Array.isArray(target) && isIntegerKey(key)) {\r\n          //如果是通过下标索引添加，注意只能是添加，那就通过length触发\r\n          add(depsMap.get('length'))\r\n        }\r\n    }\r\n  }\r\n  effects.forEach((effect: any) => {\r\n\r\n    if (effect.options.scheduler) {\r\n      effect.options.scheduler(effect)\r\n    } else {\r\n      effect()\r\n    }\r\n  })\r\n}\r\n","//实现new Proxy(target,baseHandler)的各handler\r\n\r\nimport { extend, hasChanged, hasOwn, isArray, isIntegerKey, isObject } from '@vue/shared'\r\nimport { reactive, readonly } from './reactive'\r\nimport { track, trigger } from './effect'\r\nimport { TrackOrTypes, TriggerOrTypes } from './operators'\r\n\r\n/*\r\n后续Object的方法会迁移到Reflect.getProptypeof()\r\nReflect的操作会有返回值，会报异常\r\n新es6语法\r\n\r\ntarget：原对象\r\nkey：属性\r\nreceiver：代理对象本身\r\n*/\r\n\r\nfunction createGetter(isReadonly = false, isShallow = false) {\r\n  //根据是不是只可读和是不是浅的造出不同的用于代理的get方法\r\n  return function get(target, key, receiver) {\r\n    const res = Reflect.get(target, key, receiver)\r\n\r\n    if (!isReadonly) {\r\n      //不是只读的，进行依赖收集\r\n\r\n      //传递三个参数，第二个表示操作的类型\r\n      track(target, TrackOrTypes.GET, key)\r\n    }\r\n    if (isShallow) {\r\n      //是浅的\r\n      return res\r\n    }\r\n    // ！！！！！！！vue3比vue2性能好就是vue3用懒代理，取到了再递归代理，没取到不理\r\n    if (isObject(res)) {\r\n      //如果是对象，还得进去循环一下\r\n      return isReadonly ? readonly(res) : reactive(res)\r\n    }\r\n\r\n    return res\r\n  }\r\n}\r\nfunction createSetter(isShallow = false) {\r\n  //根据是不是只可读和是不是浅的造出不同的用于代理的set方法\r\n  return function set(target, key, value, receiver) {\r\n    const oldValue = target[key] //获取老值\r\n\r\n    let hadKey=isArray(target) && isIntegerKey(key)\r\n      ? Number(key) < target.length\r\n      : hasOwn(target, key) //看看是不是数组，并且通过索引修改,如果是那就比比长度和下标，看看是新增还是修改，如果不是数组那就是对象，看看有没有这个属性。这段代码判断是不是更新\r\n\r\n    const result = Reflect.set(target, key, value, receiver)\r\n\r\n    if(!hadKey){//新增\r\n      trigger(target,TriggerOrTypes.ADD,key,value)\r\n    }else if(hasChanged(oldValue,value)){//修改\r\n      trigger(target,TriggerOrTypes.SET,key,value,oldValue)\r\n    }\r\n\r\n    return result\r\n  }\r\n}\r\n\r\nconst get = createGetter(false, false) //可读可写，深\r\nconst shallowGet = createGetter(false, true) //可读可写，浅\r\nconst readonlyGet = createGetter(true, false) //只可读，深\r\nconst shallowReadonlyGet = createGetter(true, true) //只可读，浅\r\n\r\nconst set = createSetter(false) //可读可写，深\r\nconst shallowSet = createSetter(true) //可读可写，浅\r\n\r\nexport const mutableHandlers = {\r\n  get,\r\n  set,\r\n}\r\nexport const shallowReactiveHandlers = {\r\n  get: shallowGet,\r\n  set: shallowSet,\r\n}\r\nlet readonlyObj = {\r\n  set: (target, key) => {\r\n    console.warn(`set on key ${key} failed`)\r\n  },\r\n}\r\n//set都是警告，直接合并对象\r\nexport const readOnlyHandlers = extend(\r\n  {\r\n    get: readonlyGet,\r\n  },\r\n  readonlyObj\r\n)\r\nexport const shallowReadonlyHandlers = extend(\r\n  {\r\n    get: shallowReadonlyGet,\r\n  },\r\n  readonlyObj\r\n)\r\n","import { isObject } from '@vue/shared'\r\n\r\nimport {\r\n  mutableHandlers,\r\n  shallowReactiveHandlers,\r\n  readOnlyHandlers,\r\n  shallowReadonlyHandlers,\r\n} from './baseHandlers'\r\n\r\nexport function reactive(target) {\r\n  //可读可写，深度响应式\r\n  return createReactiveObject(target, false, mutableHandlers)\r\n}\r\n\r\nexport function shallowReactive(target) {\r\n  //可读可写，浅度响应式\r\n  return createReactiveObject(target, false, shallowReactiveHandlers)\r\n}\r\n\r\nexport function readonly(target) {\r\n  //仅可读，深度响应式\r\n  return createReactiveObject(target, true, readOnlyHandlers)\r\n}\r\n\r\nexport function shallowReadonly(target) {\r\n  //仅可读，浅度响应式\r\n  return createReactiveObject(target, true, shallowReadonlyHandlers)\r\n}\r\n\r\n/*\r\n  如果一个对象只被WeakMap引用就会垃圾回收，不会造成内存泄，且键能是对象\r\n*/\r\nconst reactiveMap = new WeakMap() //存放可读写的的数据\r\nconst readonlyMap = new WeakMap() //存放只可读的数据\r\n// 函数柯里化，不同要求，不同参数，不同处理\r\nexport function createReactiveObject(target, isReadonly, baseHandlers) {\r\n  //reactive只能拦截对象\r\n  if (!isObject(target)) {\r\n    return target\r\n  }\r\n\r\n  //根据参数判断需要用到哪个Map\r\n  const proxyMap = isReadonly ? readonlyMap : reactiveMap\r\n\r\n  //判断一下当前需要代理的数据有没有被代理过\r\n  const exisitProxy = proxyMap.get(target)\r\n\r\n  //代理过直接返回\r\n  if (exisitProxy) {\r\n    return exisitProxy\r\n  }\r\n\r\n  //响应式代理核心 如果被代理过就不要再代理\r\n  const proxy = new Proxy(target, baseHandlers)\r\n  //放入对应Map\r\n  proxyMap.set(target, proxy)\r\n\r\n  return proxy\r\n}\r\n","import { hasChanged, isArray, isObject } from '@vue/shared'\r\nimport { track, trigger } from './effect'\r\nimport { TrackOrTypes, TriggerOrTypes } from './operators'\r\nimport { reactive } from './reactive'\r\n\r\nexport function ref(value) {\r\n  //深包装\r\n  return createRef(value, false)\r\n}\r\n\r\n//ref和reactive的区别，ref用defineProperty，reactive用proxy，ref的本质就是包装成对象\r\n\r\nexport function shallowRef(value) {\r\n  //浅包装\r\n  return createRef(value, true)\r\n}\r\n\r\nfunction createRef(rawValue, isShallow = false) {\r\n  //值和是否是浅的\r\n  return new RefImpl(rawValue, isShallow) //返回一个RefImpl包装的对象\r\n}\r\n\r\nconst convert = (val) => (isObject(val) ? reactive(val) : val)\r\nclass RefImpl {\r\n  public _value //ts声明一个属性\r\n  public __v_isRef = true\r\n  constructor(public rawValue, public isShallow) {\r\n    //public标识属性放大到了实例上\r\n\r\n    this._value = isShallow ? rawValue : convert(rawValue) //把值放到_value上，方便get，set统一操作\r\n  }\r\n\r\n  // get和set本质上就是defineProperty\r\n  //value其实就相当于对象的key\r\n  get value() {\r\n    track(this, TrackOrTypes.GET, 'value') //依赖收集\r\n    return this._value\r\n  }\r\n  set value(newValue) {\r\n    if (hasChanged(newValue, this.rawValue)) {\r\n      //判断新老值是否变化\r\n      this.rawValue = newValue\r\n      this._value = this.isShallow ? this.rawValue : convert(this.rawValue)\r\n      trigger(this, TriggerOrTypes.SET, 'value', newValue) //更新依赖内容\r\n    }\r\n  }\r\n}\r\n\r\nclass ObjectRefImpl {\r\n  public __v_isRef = true\r\n  constructor(public target, public key) {}\r\n  get value() {\r\n    return this.target[this.key]\r\n  }\r\n  set value(newValue) {\r\n    this.target[this.key] = newValue\r\n  }\r\n}\r\n//把对象的key转换成ref类型\r\nexport function toRef(target, key) {\r\n  return new ObjectRefImpl(target, key)\r\n}\r\n\r\n// 一次性把多个key转换成ref\r\nexport function toRefs(object) {\r\n  const ret = isArray(object) ? new Array(object.length) : {}\r\n  for (let key in object) {\r\n    ret[key] = toRef(object, key)\r\n  }\r\n  return ret\r\n}\r\n","import { isFunction } from '@vue/shared'\r\nimport { effect, track, trigger } from './effect'\r\nimport { TrackOrTypes, TriggerOrTypes } from './operators'\r\n\r\n//计算属性其实相当于是一个effect，getter的内容更新了，effect就要在调用的时候重新执行\r\n\r\n// effect(()=>{\r\n//   console.log(myage)\r\n// })\r\n\r\n// 二者极度地相似，只不过myAge不需要立即执行，且只有再次取值才重新更新计算属性的值\r\n\r\n// myAge=computed((){\r\n//   return myage  \r\n// })\r\n\r\nclass ComputedRefImpl {\r\n  public _dirty = true //默认取值不要用缓存\r\n  public _value\r\n  public _effect\r\n  constructor(getter, public setter) {\r\n    this._effect = effect(\r\n      //计算属性创建一个effect，effect返回值就是getter\r\n      getter,\r\n      {\r\n        lazy: true, //不要默认执行effect\r\n        scheduler: () => {\r\n          if (!this._dirty) {\r\n            this._dirty = true//计算属性的值需要修改，在get的时候重新通过effect的返回值获取新值\r\n            trigger(this,TriggerOrTypes.SET,'value')//执行计算属性本身依赖的更新\r\n          }\r\n        },\r\n      }\r\n    )\r\n  }\r\n\r\n  get value() {\r\n    if (this._dirty) {\r\n      this._value = this._effect() //取值执行effect,进行依赖收集，effect执行getter以后返回的值就是计算属性的结果\r\n      this._dirty = false//取到一次值以后，以后计算属性取值直接给，不需要再走effect\r\n    }\r\n    track(this,TrackOrTypes.GET,'value')//计算属性本身被effect也要依赖收集\r\n\r\n    // effect(()=>{\r\n      // console.log(计算属性)\r\n    // })\r\n\r\n    return this._value\r\n  }\r\n\r\n  set value(newValue) {\r\n    this.setter(newValue)\r\n  }\r\n}\r\n\r\nexport function computed(getterOrOptions) {\r\n  // 用户传递的getterOrOptions里可以是一个有返回值作为conputed的结果的函数,或者取值修改方法getter和setter\r\n  let getter\r\n  let setter\r\n  if (isFunction(getterOrOptions)) {\r\n    getter = getterOrOptions\r\n    setter = () => {}\r\n  } else {\r\n    getter = getterOrOptions.get\r\n    setter = getterOrOptions.set\r\n  }\r\n\r\n  return new ComputedRefImpl(getter, setter) //包装成ref模样\r\n}\r\n","let queue = []\r\nexport function queueJob(job) {\r\n  if (!queue.includes(job)) {\r\n    //把不同的同步任务加入数组\r\n    queue.push(job)\r\n    queueFlush() //执行数组的任务\r\n  }\r\n}\r\n\r\nlet isFlushPending = false\r\nfunction queueFlush() {\r\n  if (!isFlushPending) {\r\n    //只执行一次上锁\r\n    isFlushPending = true\r\n    Promise.resolve().then(flushJob) //异步执行任务，且完毕解锁\r\n  }\r\n}\r\n\r\nfunction flushJob() {\r\n  isFlushPending = false\r\n\r\n  //执行任务保证父组件优先于子组件,根据effect的id排序\r\n  queue.sort((a, b) => a.id - b.id)\r\n\r\n  for (let i = 0; i < queue.length; i++) {\r\n    const job = queue[i]\r\n    job()\r\n  }\r\n\r\n  queue.length = 0\r\n}\r\n","export function getSequence(arr) {\r\n  const len = arr.length\r\n  const result = [0]\r\n  const p = arr.slice(0)\r\n  for (let i = 0; i < len; i++) {\r\n    const arrI = arr[i]\r\n    if (arrI !== 0) {\r\n      let resultLastIndex = result[result.length - 1]\r\n      if (arr[resultLastIndex] < arrI) {\r\n        p[i] = resultLastIndex\r\n        result.push(i)\r\n        continue\r\n      }\r\n      let start = 0\r\n      let end = result.length - 1\r\n      while (start < end) {\r\n        let middle = ((start + end) / 2) | 0\r\n        if (arr[result[middle]] < arrI) {\r\n          start = middle + 1\r\n        } else {\r\n          end = middle\r\n        }\r\n      }\r\n      if (arrI < arr[result[start]]) {\r\n        if (start > 0) {\r\n          p[i] = result[start - 1]\r\n        }\r\n        result[start] = i\r\n      }\r\n    }\r\n  }\r\n  let length = result.length\r\n  let last = result[length - 1]\r\n  while (length-- > 0) {\r\n    result[length] = last\r\n    last = p[last]\r\n  }\r\n  return result\r\n}","import { ShapeFlags } from '@vue/shared'\r\nimport { createAppAPI } from './apiCreateApp'\r\nimport { createComponentInstance, setupComponent } from './component'\r\nimport { effect } from '@vue/reactivity'\r\nimport { normalizeVnode, Text } from './vnode'\r\nimport { queueJob } from './schedule'\r\nimport { getSequence } from './getSequence.js'\r\n\r\nexport function createRenderer(renderOptions) {\r\n  const {\r\n    insert: hostInsert,\r\n    remove: hostRemove,\r\n    patchProp: hostPatchProp,\r\n    createElement: hostCreateElement,\r\n    createText: hostCreateText,\r\n    createComment: hostCreateComment,\r\n    setText: hostSetText,\r\n    setElementText: hostSetElementText,\r\n    nextSibling: hostNextSibling,\r\n  } = renderOptions\r\n\r\n  const setupRenderEffect = (instance, container) => {\r\n    //创建effect方法，在effect运行render，这样更新的时候就会执行\r\n    instance.update = effect(\r\n      function componentEffect() {\r\n        //每个组件都有自己的effect，对应组件数据变化重新执行对应组件effect\r\n        if (!instance.isMounted) {\r\n          //是否被挂载过，没有则是初渲染\r\n          //初渲染\r\n          let proxyToUse = instance.proxy\r\n\r\n          let subTree = (instance.subTree = instance.render(proxyToUse))\r\n          patch(null, subTree, container)\r\n          instance.isMounted = true\r\n        } else {\r\n          // 更新渲染\r\n          const prevtree = instance.subTree\r\n          let proxyToUse = instance.proxy\r\n          const nextTree = instance.render(proxyToUse)\r\n          patch(prevtree, nextTree, container)\r\n        }\r\n      },\r\n      {\r\n        scheduler: queueJob,\r\n      }\r\n    )\r\n  }\r\n\r\n  const mountComponent = (initialVNode, container) => {\r\n    //组件渲染流程 最核心就是调用setup拿到返回值，获取render函数进行渲染\r\n    // 1.先有实例\r\n    const instance = (initialVNode.component =\r\n      createComponentInstance(initialVNode))\r\n    // 2.需要的数据解析到实例\r\n    setupComponent(instance)\r\n    // 3.创建一个effect让render运行\r\n    setupRenderEffect(instance, container)\r\n  }\r\n\r\n  const processComponent = (n1, n2, container) => {\r\n    if (n1 == null) {\r\n      //组件没有上一次虚拟节点,即第一次渲染\r\n      mountComponent(n2, container)\r\n    } else {\r\n      //组件更新\r\n    }\r\n  }\r\n\r\n  function mountChildren(children, container) {\r\n    for (let i = 0; i < children.length; i++) {\r\n      // 避免覆盖，把文本类型的儿子变成对象\r\n      let child = normalizeVnode(children[i])\r\n      patch(null, child, container)\r\n    }\r\n  }\r\n\r\n  function mountElement(vnode, container, anchor) {\r\n    //递归渲染\r\n    const { props, shapeFlag, type, children } = vnode\r\n    let el = (vnode.el = hostCreateElement(type)) //创建元素\r\n    if (props) {\r\n      for (const key in props) {\r\n        hostPatchProp(el, key, null, props[key]) //创建属性\r\n      }\r\n    }\r\n    //如果儿子是文本\r\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n      hostSetElementText(el, children)\r\n    }\r\n    //如果儿子是数组\r\n\r\n    if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n      mountChildren(children, el)\r\n    }\r\n    hostInsert(el, container, anchor)\r\n  }\r\n\r\n  function patchProps(oldProps, newProps, el) {\r\n    if (oldProps !== newProps) {\r\n      for (let key in newProps) {\r\n        const prev = oldProps[key]\r\n        const next = newProps[key]\r\n        if (prev !== next) {\r\n          hostPatchProp(el, key, prev, next)\r\n        }\r\n      }\r\n      for (const key in newProps) {\r\n        if (!(key in newProps)) {\r\n          hostPatchProp(el, key, oldProps[key], null)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  function unmountChildren(children, el = null) {\r\n    for (let i = 0; i < children.length; i++) {\r\n      unmount(children[i])\r\n    }\r\n  }\r\n  function patchKeyedChildren(c1, c2, el) {\r\n    let i = 0 //默认从头开始比\r\n    let e1 = c1.length - 1\r\n    let e2 = c2.length - 1\r\n\r\n    // 尽可能减少比对的区域\r\n\r\n    //循环匹配，从头匹配到不同的就停止\r\n    while (i <= e1 && i <= e2) {\r\n      const n1 = c1[i]\r\n      const n2 = c2[i]\r\n      if (isSameVnodeType(n1, n2)) {\r\n        patch(n1, n2, el)\r\n      } else {\r\n        break\r\n      }\r\n      i++\r\n    }\r\n    //循环匹配，从尾匹配到不同的就停止\r\n    while (i <= e1 && i <= e2) {\r\n      const n1 = c1[e1]\r\n      const n2 = c2[e2]\r\n      if (isSameVnodeType(n1, n2)) {\r\n        patch(n1, n2, el)\r\n      } else {\r\n        break\r\n      }\r\n      e1--\r\n      e2--\r\n    }\r\n\r\n    //根据i,e1,e2的大小关系推断出新老儿子不同的数量关系\r\n    if (i > e1) {\r\n      //老的少新的多\r\n      if (i <= e2) {\r\n        while (i <= e2) {\r\n          // 根据e2找到添加节点的参照位置\r\n          const nextPos = e2 + 1\r\n\r\n          const anchor = nextPos < c2.length ? c2[nextPos].el : null //null就是往后直接加\r\n          //需要添加\r\n          patch(null, c2[i], el, anchor)\r\n          i++\r\n        }\r\n      }\r\n    } else if (i > e2) {\r\n      //老的多新的少\r\n      while (i <= e1) {\r\n        unmount(c1[i])\r\n        i++\r\n      }\r\n    } else {\r\n      //乱序比对，尽可能复用\r\n      let s1 = i\r\n      let s2 = i\r\n\r\n      //创建一个映射表\r\n      const keyToNewIndexMap = new Map()\r\n\r\n      for (let i = s2; i <= e2; i++) {\r\n        //把新的节点放到映射表\r\n        const childVnode = c2[i]\r\n        keyToNewIndexMap.set(childVnode.key, i)\r\n      }\r\n      // 将新的节点的下标在老的节点下标哪个位置映射出来\r\n      const toBePatched = e2 - s2 + 1\r\n      const newIndexToOldIndexMap = new Array(toBePatched).fill(0)\r\n      //去老的里面找，看有没有可以复用的\r\n      for (let i = s1; i <= e1; i++) {\r\n        const oldVnode = c1[i]\r\n        let newIndex = keyToNewIndexMap.get(oldVnode.key)\r\n        if (newIndex === undefined) {\r\n          //老的不在新的里面,卸载\r\n          unmount(oldVnode)\r\n        } else {\r\n          //新老比对\r\n          newIndexToOldIndexMap[newIndex - s2] = i + 1\r\n          patch(oldVnode, c2[newIndex], el)\r\n        }\r\n      }\r\n      let increasingNewIndexSequence = getSequence(newIndexToOldIndexMap) //最长公共子序列算法\r\n      let j = increasingNewIndexSequence.length - 1\r\n      console.log(increasingNewIndexSequence)\r\n      for (let i = toBePatched - 1; i >= 0; i--) {\r\n        let currentIndex = i + s2\r\n        let child = c2[currentIndex]\r\n        const anchor =\r\n          currentIndex + 1 < c2.length < c2.length\r\n            ? c2[currentIndex + 1].el\r\n            : null\r\n        if (newIndexToOldIndexMap[i] == 0) {\r\n          patch(null, child, el, anchor)\r\n        } else {\r\n          if (i != increasingNewIndexSequence[j]) {\r\n            hostInsert(child.el, el, anchor)\r\n          } else {\r\n            j--\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  function patchChild(n1, n2, el) {\r\n    const c1 = n1.children\r\n    const c2 = n2.children\r\n\r\n    const prevShapeFlag = n1.shapeFlag\r\n    const shapeFlag = n2.shapeFlag\r\n\r\n    // 分别识别儿子的状况\r\n\r\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n      //老的有n个孩子，新的是文本\r\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n        unmountChildren(c1, el)\r\n      }\r\n\r\n      //两个人都是文本\r\n      if (c2 !== c1) {\r\n        hostSetElementText(el, c2)\r\n      }\r\n    } else {\r\n      // 新是数组，上一次是文本或者数组\r\n      if (prevShapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n        // 上一次是数组，这一次是数组\r\n        if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n          patchKeyedChildren(c1, c2, el)\r\n        } else {\r\n          //没有孩子\r\n          hostSetElementText(el, '')\r\n        }\r\n      } else {\r\n        //上一次是文本或者空\r\n        if (prevShapeFlag & ShapeFlags.TEXT_CHILDREN) {\r\n          hostSetElementText(el, '')\r\n        }\r\n        //这一次是数组\r\n        if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\r\n          mountChildren(c2, el)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  function patchElement(n1, n2, container) {\r\n    let el = (n2.el = n1.el)\r\n    const oldProps = n1.props || {}\r\n    const newProps = n2.props || {}\r\n\r\n    //比属性\r\n    patchProps(oldProps, newProps, el)\r\n    //比儿子\r\n    patchChild(n1, n2, el)\r\n  }\r\n  function processElement(n1, n2, container, anchor) {\r\n    if (n1 == null) {\r\n      mountElement(n2, container, anchor)\r\n    } else {\r\n      patchElement(n1, n2, container)\r\n    }\r\n  }\r\n  const processText = (n1, n2, container) => {\r\n    if (n1 == null) {\r\n      hostInsert((n2.el = hostCreateText(n2.children)), container)\r\n    }\r\n  }\r\n\r\n  //看看n1和n2是不是同类元素\r\n  function isSameVnodeType(n1, n2) {\r\n    return n1.type === n2.type && n1.key === n2.key\r\n  }\r\n  //删除元素\r\n  function unmount(n1) {\r\n    hostRemove(n1.el)\r\n  }\r\n\r\n  const patch = (n1, n2, container, anchor = null) => {\r\n    //针对不同类型做初始化\r\n    const { shapeFlag, type } = n2\r\n\r\n    //如果n1，n2是不一样类型的，可以不用比较直接替换\r\n    if (n1 && !isSameVnodeType(n1, n2)) {\r\n      anchor = hostNextSibling(n1.el) //获取n1的下一个元素，让n2插入的时候有参照位置\r\n      unmount(n1)\r\n      n1 = null //这里n1是null，那么后面直接重新挂载n2\r\n    }\r\n\r\n    switch (type) {\r\n      case Text:\r\n        processText(n1, n2, container)\r\n        break\r\n      default:\r\n        if (shapeFlag & ShapeFlags.ELEMENT) {\r\n          //如果是元素\r\n          processElement(n1, n2, container, anchor)\r\n        } else if (shapeFlag & ShapeFlags.STATEFUL_COMPONENT) {\r\n          //如果是组件\r\n          processComponent(n1, n2, container)\r\n        }\r\n        break\r\n    }\r\n  }\r\n\r\n  const render = (vnode, container) => {\r\n    //核心，根据不同的虚拟节点，创建对应的真实元素\r\n    patch(null, vnode, container)\r\n  }\r\n  //怎么渲染\r\n  return {\r\n    createApp: createAppAPI(render),\r\n  }\r\n}\r\n","import { isArray, isObject } from '@vue/shared'\r\nimport { createVnode, isVnode } from './vnode'\r\n\r\nexport function h(type, propsOrChilden, children) {\r\n  const l = arguments.length\r\n\r\n  if (l == 2) {\r\n    //类型+属性 或者 类型+孩子\r\n    if (isObject(propsOrChilden) && !isArray(propsOrChilden)) {\r\n      if (isVnode(propsOrChilden)) {\r\n        // 判断propsOrChilden是不是虚拟节点，因为虚拟节点也是一个对象\r\n        return createVnode(type, null, [propsOrChilden])\r\n      } else {\r\n        // propsOrChilden是属性\r\n        return createVnode(type, propsOrChilden)\r\n      }\r\n    } else {\r\n      //如果propsOrChilden参数不是对象，那一定是孩子\r\n      return createVnode(type, null, propsOrChilden)\r\n    }\r\n  } else {\r\n    if (l > 3) {\r\n      // 孩子一个个写，没有写成数组，变成数组\r\n      children = Array.prototype.slice.call(arguments, 2)\r\n    } else if (l === 3 && isVnode(children)) {\r\n      children = [children]\r\n    }\r\n    return createVnode(type,propsOrChilden,children)\r\n  }\r\n}\r\n","import { extend } from '@vue/shared'\r\nimport { nodeOps } from './nodeOps'\r\nimport { patchProp } from './patchProp'\r\nimport { createRenderer } from '@vue/runtime-core'\r\n\r\nconst renderOptions = extend({ patchProp }, nodeOps)\r\n\r\nexport { renderOptions }\r\n\r\nexport function createApp(rootComponent, rootProps = null) {\r\n  //createRenderer(怎么渲染)是高阶函数,创建一个渲染器,返回createApp(渲染什么属性什么组件),createApp返回mount(挂载目的地)\r\n  const app = createRenderer(renderOptions).createApp(rootComponent, rootProps)\r\n  let { mount } = app\r\n  app.mount = function (container) {\r\n    //清空容器\r\n    container = document.querySelector(container)\r\n    container.innerHTML = ''\r\n    mount(container)\r\n    // 渲染,挂载\r\n  }\r\n  return app\r\n}\r\n\r\nexport * from '@vue/runtime-core'\r\n"],"names":[],"mappings":"AACO,MAAM,QAAQ,GAAG,CAAC,KAAK,KAAK,OAAO,KAAK,IAAI,QAAQ,IAAI,KAAK,KAAK,IAAI,CAAA;AAEtE,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAA;AAE5B,MAAM,OAAO,GAAG,KAAK,CAAC,OAAO,CAAA;AAC7B,MAAM,UAAU,GAAG,CAAC,KAAK,KAAK,OAAO,KAAK,IAAI,UAAU,CAAA;AAExD,MAAM,QAAQ,GAAG,CAAC,KAAK,KAAK,OAAO,KAAK,IAAI,QAAQ,CAAA;AAEpD,MAAM,YAAY,GAAG,CAAC,GAAG,KAAK,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,GAAG,CAAA;AAE/D,IAAI,cAAc,GAAG,MAAM,CAAC,SAAS,CAAC,cAAc,CAAA;AAC7C,MAAM,MAAM,GAAG,CAAC,MAAM,EAAE,GAAG,KAAK,cAAc,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;AAEhE,MAAM,UAAU,GAAG,CAAC,QAAQ,EAAE,KAAK,KAAK,QAAQ,KAAK,KAAK;;ACfjE;AAEO,MAAM,OAAO,GAAG;;IAErB,aAAa,EAAE,CAAC,QAAQ,KAAK,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;;AAG7D,IAAA,MAAM,EAAE,CAAC,KAAK,KAAI;QAChB,IAAI,KAAK,EAAE;AACT,YAAA,MAAM,MAAM,GAAG,KAAK,CAAC,UAAU,CAAA;YAC/B,IAAI,MAAM,EAAE;AACV,gBAAA,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,CAAA;aAC1B;SACF;KACF;;IAGD,MAAM,EAAE,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,GAAG,IAAI,KAAI;QACvC,MAAM,CAAC,YAAY,CAAC,KAAK,EAAE,MAAM,CAAC,CAAA;KACnC;;IAGD,aAAa,EAAE,CAAC,QAAQ,KAAK,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC;;AAG7D,IAAA,cAAc,EAAE,CAAC,EAAE,EAAE,IAAI,MAAM,EAAE,CAAC,WAAW,GAAG,IAAI,CAAC;;IAGrD,UAAU,EAAE,CAAC,IAAI,KAAK,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC;;AAGnD,IAAA,OAAO,EAAE,CAAC,IAAI,EAAE,IAAI,MAAM,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;;IAGhD,WAAW,EAAE,CAAC,IAAI,KAAK,IAAI,CAAC,WAAW;CACxC;;ACnCD;AAEO,MAAM,SAAS,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,SAAS,KAAI;AAC9C,IAAA,IAAI,SAAS,IAAI,IAAI,EAAE;AACrB,QAAA,EAAE,CAAC,eAAe,CAAC,GAAG,CAAC,CAAA;KACxB;SAAM;AACL,QAAA,EAAE,CAAC,YAAY,CAAC,GAAG,EAAE,SAAS,CAAC,CAAA;KAChC;AACH,CAAC;;ACRD;AAEO,MAAM,UAAU,GAAG,CAAC,EAAE,EAAE,SAAS,KAAI;AAC1C,IAAA,IAAI,SAAS,IAAI,IAAI,EAAE;QACrB,SAAS,GAAG,EAAE,CAAA;KACf;AACD,IAAA,EAAE,CAAC,UAAU,GAAG,SAAS,CAAA;AAC3B,CAAC;;ACPD;AAC0B;AACnB,MAAM,WAAW,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,SAAS,KAAI;AAChD,IAAA,MAAM,QAAQ,GAAG,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,IAAI,GAAG,EAAE,CAAC,CAAA;IAC1C,MAAM,MAAM,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;AAC5B,IAAA,IAAI,SAAS,IAAI,MAAM,EAAE;AACvB,QAAA,MAAM,CAAC,KAAK,GAAG,SAAS,CAAA;KACzB;AAAM,SAAA;QAEL,MAAM,SAAS,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAA;;QAG5C,IAAI,SAAS,EAAE;;AAEb,YAAA,IAAI,OAAO,IAAI,QAAQ,CAAC,GAAG,CAAC,GAAG,aAAa,CAAC,SAAS,CAAC,CAAC,CAAA;AACxD,YAAA,EAAE,CAAC,gBAAgB,CAAC,SAAS,EAAE,OAAO,CAAC,CAAA;SACxC;aAAM;;AAEL,YAAA,EAAE,CAAC,mBAAmB,CAAC,SAAS,EAAE,MAAM,CAAC,CAAA;AACzC,YAAA,QAAQ,CAAC,SAAS,CAAC,GAAG,SAAS,CAAA;SAChC;KACF;AACH,CAAC,CAAA;AAED,SAAS,aAAa,CAAC,KAAK,EAAA;AAC1B,IAAA,MAAM,OAAO,GAAG,CAAC,CAAC,KAAI;AACpB,QAAA,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;AAClB,KAAC,CAAA;AACD,IAAA,OAAO,CAAC,KAAK,GAAG,KAAK,CAAA;AACrB,IAAA,OAAO,OAAO,CAAA;AAChB;;AC9BA;AAEO,MAAM,UAAU,GAAG,CAAC,EAAE,EAAE,SAAS,EAAE,SAAS,KAAI;AACrD,IAAA,MAAM,KAAK,GAAG,EAAE,CAAC,KAAK,CAAA;AACtB,IAAA,IAAI,SAAS,IAAI,IAAI,EAAE;AACrB,QAAA,EAAE,CAAC,eAAe,CAAC,OAAO,CAAC,CAAA;KAC5B;SAAM;;QAEL,IAAI,SAAS,EAAE;AACb,YAAA,KAAK,IAAI,GAAG,IAAI,SAAS,EAAE;gBACzB,IAAI,SAAS,CAAC,GAAG,CAAC,IAAI,IAAI,EAAE;AAC1B,oBAAA,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,CAAA;iBAChB;aACF;SACF;;AAGD,QAAA,KAAK,IAAI,GAAG,IAAI,SAAS,EAAE;YACzB,KAAK,CAAC,GAAG,CAAC,GAAG,SAAS,CAAC,GAAG,CAAC,CAAA;SAC5B;KACF;AACH,CAAC;;ACrBD;AAOO,MAAM,SAAS,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,SAAS,EAAE,SAAS,KAAI;IACzD,QAAQ,GAAG;AACT,QAAA,KAAK,OAAO;AACV,YAAA,UAAU,CAAC,EAAE,EAAE,SAAS,CAAC,CAAA;YACzB,MAAK;AACP,QAAA,KAAK,OAAO;AACV,YAAA,UAAU,CAAC,EAAE,EAAE,SAAS,EAAE,SAAS,CAAC,CAAA;YACpC,MAAK;AACP,QAAA;YACE,IAAI,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;AACzB,gBAAA,WAAW,CAAC,EAAE,EAAC,GAAG,EAAC,SAAS,CAAC,CAAA;aAC9B;iBAAM;AACL,gBAAA,SAAS,CAAC,EAAE,EAAE,GAAG,EAAE,SAAS,CAAC,CAAA;aAC9B;YACD,MAAK;KACR;AACH,CAAC;;ACvBD;AAIM,SAAU,OAAO,CAAC,KAAK,EAAA;IAC3B,OAAO,KAAK,CAAC,YAAY,CAAA;AAC3B,CAAC;AAEM,MAAM,WAAW,GAAG,CAAC,IAAI,EAAE,KAAK,EAAE,QAAQ,GAAG,IAAI,KAAI;;AAE1D,IAAA,MAAM,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC;UAC7B,CAAA;AACD,UAAE,QAAQ,CAAC,IAAI,CAAC;cACf,CAAA;cACC,CAAC,CAAA;;AAGL,IAAA,MAAM,KAAK,GAAG;QACZ,YAAY,EAAE,IAAI;QAClB,IAAI;QACJ,KAAK;QACL,QAAQ;QACR,SAAS,EAAE,IAAI;QACf,EAAE,EAAE,IAAI;AACR,QAAA,GAAG,EAAE,KAAK,IAAI,KAAK,CAAC,GAAG;QACvB,SAAS;KACV,CAAA;;AAED,IAAA,iBAAiB,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAA;AAElC,IAAA,OAAO,KAAK,CAAA;AACd,CAAC,CAAA;AAED,SAAS,iBAAiB,CAAC,KAAK,EAAE,QAAQ,EAAA;IACxC,IAAI,IAAI,GAAG,CAAC,CAAA;AACZ,IAAA,IAAI,QAAQ,IAAI,IAAI,EAAE,CACrB;AAAM,SAAA,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE;AAC5B,QAAA,IAAI,sCAA4B;KACjC;SAAM;AACL,QAAA,IAAI,oCAA2B;KAChC;;IAED,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC,SAAS,GAAG,IAAI,CAAA;AAC1C,CAAC;AAEM,MAAM,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,CAAA;AAC5B,SAAU,cAAc,CAAC,KAAK,EAAA;AAClC,IAAA,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE;AACnB,QAAA,OAAO,KAAK,CAAA;KACb;IACD,OAAO,WAAW,CAAC,IAAI,EAAE,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,CAAC,CAAA;AAC/C;;ACjDM,SAAU,YAAY,CAAC,MAAM,EAAA;AACjC,IAAA,OAAO,SAAS,SAAS,CAAC,aAAa,EAAE,SAAS,EAAA;;AAEhD,QAAA,MAAM,GAAG,GAAG;AACV,YAAA,MAAM,EAAE,SAAS;AACjB,YAAA,WAAW,EAAE,aAAa;AAC1B,YAAA,WAAW,EAAE,IAAI;AACjB,YAAA,KAAK,CAAC,SAAS,EAAA;;gBAGb,IAAI,KAAK,GAAG,WAAW,CAAC,aAAa,EAAC,SAAS,CAAC,CAAA;AAChD,gBAAA,MAAM,CAAC,KAAK,EAAE,SAAS,CAAC,CAAA;aAEzB;SACF,CAAA;AACD,QAAA,OAAO,GAAG,CAAA;AACZ,KAAC,CAAA;AACH;;ACjBO,MAAM,2BAA2B,GAAG;AACzC,IAAA,GAAG,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAA;;QAEtB,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,QAAQ,CAAA;QAC5C,KAAK,GAAG,CAAC,CAAC,CAAC,IAAI,GAAG,GAAG;AACnB,YAAA,OAAO,EAAE,CAAA;SACV;AACD,QAAA,IAAI,MAAM,CAAC,UAAU,EAAE,GAAG,CAAC,EAAE;AAC3B,YAAA,OAAO,UAAU,CAAC,GAAG,CAAC,CAAA;SACvB;AAAM,aAAA,IAAI,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE;AAC7B,YAAA,OAAO,KAAK,CAAC,GAAG,CAAC,CAAA;SAClB;AAAM,aAAA,IAAI,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE;AAC5B,YAAA,OAAO,IAAI,CAAC,GAAG,CAAC,CAAA;SACjB;aAAM;AACL,YAAA,OAAO,SAAS,CAAA;SACjB;KACF;IACD,GAAG,CAAC,EAAE,CAAC,EAAE,QAAQ,EAAE,EAAE,GAAG,EAAE,KAAK,EAAA;QAC7B,MAAM,EAAE,UAAU,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,QAAQ,CAAA;AAC5C,QAAA,IAAI,MAAM,CAAC,UAAU,EAAE,GAAG,CAAC,EAAE;AAC3B,YAAA,UAAU,CAAC,GAAG,CAAC,GAAG,KAAK,CAAA;SACxB;AAAM,aAAA,IAAI,MAAM,CAAC,KAAK,EAAE,GAAG,CAAC,EAAE;AAC7B,YAAA,KAAK,CAAC,GAAG,CAAC,GAAG,KAAK,CAAA;SACnB;AAAM,aAAA,IAAI,MAAM,CAAC,IAAI,EAAE,GAAG,CAAC,EAAE;AAC5B,YAAA,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAA;SAClB;AACD,QAAA,OAAO,IAAI,CAAA;KACZ;CACF;;AC9BD;AAKM,SAAU,uBAAuB,CAAC,KAAK,EAAA;;AAE3C,IAAA,MAAM,QAAQ,GAAG;QACf,KAAK;QACL,IAAI,EAAE,KAAK,CAAC,IAAI;AAChB,QAAA,KAAK,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;AACf,QAAA,KAAK,EAAE,EAAE;AACT,QAAA,KAAK,EAAE,EAAE;AACT,QAAA,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;AACd,QAAA,GAAG,EAAE,EAAE;AACP,QAAA,UAAU,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;QACpB,SAAS,EAAE,KAAK;KACjB,CAAA;IACD,QAAQ,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAA;AAC9B,IAAA,OAAO,QAAQ,CAAA;AACjB,CAAC;AAEK,SAAU,cAAc,CAAC,QAAQ,EAAA;;IAErC,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAA;AAE1C,IAAA,QAAQ,CAAC,KAAK,GAAG,KAAK,CAAA;AACtB,IAAA,QAAQ,CAAC,QAAQ,GAAG,QAAQ,CAAA;;IAG5B,IAAI,UAAU,GAAG,QAAQ,CAAC,KAAK,CAAC,SAAS,yCAAgC;IACzE,IAAI,UAAU,EAAE;;;QAGd,sBAAsB,CAAC,QAAQ,CAAC,CAAA;KACjC;AACH,CAAC;AAED,SAAS,sBAAsB,CAAC,QAAQ,EAAA;;AAEtC,IAAA,QAAQ,CAAC,KAAK,GAAG,IAAI,KAAK,CAAC,QAAQ,CAAC,GAAG,EAAE,2BAAkC,CAAC,CAAA;;AAE5E,IAAA,IAAI,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAA;AAC7B,IAAA,IAAI,EAAE,KAAK,EAAE,GAAG,SAAS,CAAA;IAEzB,IAAI,KAAK,EAAE;AACT,QAAmB,kBAAkB,CAAC,QAAQ,EAAC;AAC/C,QAAA,MAAM,WAAW,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,cAAc,CAAC,CAAA;AACzD,QAAA,kBAAkB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAA;KAC1C;SAAM;AACL,QAAA,oBAAoB,CAAC,QAAQ,CAAC,CAAA;KAC/B;AACH,CAAC;AACD,SAAS,kBAAkB,CAAC,QAAQ,EAAE,WAAW,EAAA;;AAE/C,IAAA,IAAI,UAAU,CAAC,WAAW,CAAC,EAAE;AAC3B,QAAA,QAAQ,CAAC,MAAM,GAAG,WAAW,CAAA;KAC9B;AAAM,SAAA,IAAI,QAAQ,CAAC,WAAW,CAAC,EAAE;AAChC,QAAA,QAAQ,CAAC,UAAU,GAAG,WAAW,CAAA;KAClC;IACD,oBAAoB,CAAC,QAAQ,CAAC,CAAA;AAChC,CAAC;AACD,SAAS,oBAAoB,CAAC,QAAQ,EAAA;AACpC,IAAA,IAAI,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAA;AAC7B,IAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE;;QAEpB,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,SAAS,CAAC,QAAQ,EAAE,CAC5C;AACD,QAAA,QAAQ,CAAC,MAAM,GAAG,SAAS,CAAC,MAAM,CAAA;KACnC;AACH,CAAC;AAED;AACA,SAAS,kBAAkB,CAAC,QAAQ,EAAA;IAClC,OAAO;QACL,KAAK,EAAE,QAAQ,CAAC,KAAK;QACrB,KAAK,EAAE,QAAQ,CAAC,KAAK;AAErB,QAAA,IAAI,EAAE,MAAK,GAAG;AACd,QAAA,MAAM,EAAE,MAAK,GAAG;KACjB,CAAA;AACH;;SC9EgB,MAAM,CAAC,EAAE,EAAE,UAAe,EAAE,EAAA;;IAG1C,MAAM,MAAM,GAAG,oBAAoB,CAAC,EAAE,EAAE,OAAO,CAAC,CAAA;AAEhD,IAAA,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;QACjB,MAAM,EAAE,CAAA;KACT;IACD,OAAO,MAAM,CAAA;AACf,CAAC;AAED,IAAI,GAAG,GAAG,CAAC,CAAA;AACX,IAAI,YAAY,CAAA;AAChB,MAAM,WAAW,GAAG,EAAE,CAAA;AACtB,SAAS,oBAAoB,CAAC,EAAE,EAAE,OAAO,EAAA;IACvC,MAAM,MAAM,GAAG,SAAS,cAAc,GAAA;QACpC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;;AAEjC,YAAA,IAAI;AACF,gBAAA,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;AACxB,gBAAA,YAAY,GAAG,MAAM,CAAA;gBACrB,OAAO,EAAE,EAAE,CAAA;aACZ;oBAAS;AACR,gBAAA,WAAW,CAAC,GAAG,EAAE,CAAA;gBACjB,YAAY,GAAG,WAAW,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;aACnD;SACF;AACH,KAAC,CAAA;AACD,IAAA,MAAM,CAAC,EAAE,GAAG,GAAG,EAAE,CAAA;AACjB,IAAA,MAAM,CAAC,SAAS,GAAG,IAAI,CAAA;AACvB,IAAA,MAAM,CAAC,GAAG,GAAG,EAAE,CAAA;AACf,IAAA,MAAM,CAAC,OAAO,GAAG,OAAO,CAAA;AACxB,IAAA,OAAO,MAAM,CAAA;AACf,CAAC;AAED;AACA,MAAM,SAAS,GAAG,IAAI,OAAO,EAAE,CAAA;SACf,KAAK,CAAC,MAAM,EAAE,IAAI,EAAE,GAAG,EAAA;AACrC,IAAA,IAAI,YAAY,KAAK,SAAS,EAAE;QAC9B,OAAM;KACP;;IAED,IAAI,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;IACnC,IAAI,CAAC,OAAO,EAAE;;AAEZ,QAAA,SAAS,CAAC,GAAG,CAAC,MAAM,GAAG,OAAO,GAAG,IAAI,GAAG,EAAE,EAAE,CAAA;KAC7C;IACD,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;IAC1B,IAAI,CAAC,GAAG,EAAE;;AAER,QAAA,OAAO,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,GAAG,EAAE,EAAE,CAAA;KACpC;;IAED,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,EAAE;AAC1B,QAAA,GAAG,CAAC,GAAG,CAAC,YAAY,CAAC,CAAA;KACtB;AACH,CAAC;AAEK,SAAU,OAAO,CAAC,MAAM,EAAE,IAAI,EAAE,GAAI,EAAE,QAAS,EAAE,QAAS,EAAA;;IAE9D,MAAM,OAAO,GAAG,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;AACrC,IAAA,IAAI,CAAC,OAAO;QAAE,OAAM;;AAGpB,IAAA,MAAM,OAAO,GAAG,IAAI,GAAG,EAAE,CAAA;AACzB,IAAA,MAAM,GAAG,GAAG,CAAC,WAAW,KAAI;QAC1B,IAAI,WAAW,EAAE;AACf,YAAA,WAAW,CAAC,OAAO,CAAC,CAAC,MAAM,KAAK,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAA;SACrD;AACH,KAAC,CAAA;;IAED,IAAI,GAAG,KAAK,QAAQ,IAAI,OAAO,CAAC,MAAM,CAAC,EAAE;QACvC,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,EAAE,GAAG,KAAI;AAC3B,YAAA,SAAQ;YACR,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,EAAE,GAAG,CAAC,CAAA;YAC9B,IAAI,GAAG,KAAK,QAAQ,IAAI,GAAG,GAAG,QAAQ,EAAE;;AAEtC,gBAAA,GAAG,CAAC,GAAG,CAAC,CAAA;aACT;AACH,SAAC,CAAC,CAAA;KACH;SAAM;AACL,QAAA,IAAI,GAAG,KAAK,SAAS,EAAE;;YAErB,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAA;SACtB;QACD,QAAQ,IAAI;AACV,YAAA,KAAA,CAAA;AACE,gBAAA,IAAI,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,YAAY,CAAC,GAAG,CAAC,EAAE;;oBAE9C,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC,CAAA;iBAC3B;SACJ;KACF;AACD,IAAA,OAAO,CAAC,OAAO,CAAC,CAAC,MAAW,KAAI;AAE9B,QAAA,IAAI,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE;AAC5B,YAAA,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,MAAM,CAAC,CAAA;SACjC;aAAM;AACL,YAAA,MAAM,EAAE,CAAA;SACT;AACH,KAAC,CAAC,CAAA;AACJ;;ACxGA;AAOA;;;;;;;;AAQE;AAEF,SAAS,YAAY,CAAC,UAAU,GAAG,KAAK,EAAE,SAAS,GAAG,KAAK,EAAA;;AAEzD,IAAA,OAAO,SAAS,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAA;AACvC,QAAA,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAA;QAE9C,IAAI,CAAC,UAAU,EAAE;;;AAIf,YAAA,KAAK,CAAC,MAAM,EAAoB,CAAA,yBAAA,GAAG,CAAC,CAAA;SACrC;QACD,IAAI,SAAS,EAAE;;AAEb,YAAA,OAAO,GAAG,CAAA;SACX;;AAED,QAAA,IAAI,QAAQ,CAAC,GAAG,CAAC,EAAE;;AAEjB,YAAA,OAAO,UAAU,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;SAClD;AAED,QAAA,OAAO,GAAG,CAAA;AACZ,KAAC,CAAA;AACH,CAAC;AACD,SAAS,YAAY,CAAC,SAAS,GAAG,KAAK,EAAA;;IAErC,OAAO,SAAS,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,EAAA;QAC9C,MAAM,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,CAAA;QAE5B,IAAI,MAAM,GAAC,OAAO,CAAC,MAAM,CAAC,IAAI,YAAY,CAAC,GAAG,CAAC;cAC3C,MAAM,CAAC,GAAG,CAAC,GAAG,MAAM,CAAC,MAAM;cAC3B,MAAM,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;AAEvB,QAAA,MAAM,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAA;AAExD,QAAA,IAAG,CAAC,MAAM,EAAC;AACT,YAAA,OAAO,CAAC,MAAM,EAAA,CAAA,2BAAoB,GAAG,EAAC,KAAK,CAAC,CAAA;SAC7C;aAAK,IAAG,UAAU,CAAC,QAAQ,EAAC,KAAK,CAAC,EAAC;YAClC,OAAO,CAAC,MAAM,EAAoB,CAAA,2BAAA,GAAG,EAAC,KAAc,CAAC,CAAA;SACtD;AAED,QAAA,OAAO,MAAM,CAAA;AACf,KAAC,CAAA;AACH,CAAC;AAED,MAAM,GAAG,GAAG,YAAY,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;AACtC,MAAM,UAAU,GAAG,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,CAAA;AAC5C,MAAM,WAAW,GAAG,YAAY,CAAC,IAAI,EAAE,KAAK,CAAC,CAAA;AAC7C,MAAM,kBAAkB,GAAG,YAAY,CAAC,IAAI,EAAE,IAAI,CAAC,CAAA;AAEnD,MAAM,GAAG,GAAG,YAAY,CAAC,KAAK,CAAC,CAAA;AAC/B,MAAM,UAAU,GAAG,YAAY,CAAC,IAAI,CAAC,CAAA;AAE9B,MAAM,eAAe,GAAG;IAC7B,GAAG;IACH,GAAG;CACJ,CAAA;AACM,MAAM,uBAAuB,GAAG;AACrC,IAAA,GAAG,EAAE,UAAU;AACf,IAAA,GAAG,EAAE,UAAU;CAChB,CAAA;AACD,IAAI,WAAW,GAAG;AAChB,IAAA,GAAG,EAAE,CAAC,MAAM,EAAE,GAAG,KAAI;AACnB,QAAA,OAAO,CAAC,IAAI,CAAC,cAAc,GAAG,CAAA,OAAA,CAAS,CAAC,CAAA;KACzC;CACF,CAAA;AACD;AACO,MAAM,gBAAgB,GAAG,MAAM,CACpC;AACE,IAAA,GAAG,EAAE,WAAW;CACjB,EACD,WAAW,CACZ,CAAA;AACM,MAAM,uBAAuB,GAAG,MAAM,CAC3C;AACE,IAAA,GAAG,EAAE,kBAAkB;CACxB,EACD,WAAW,CACZ;;ACtFK,SAAU,QAAQ,CAAC,MAAM,EAAA;;IAE7B,OAAO,oBAAoB,CAAC,MAAM,EAAE,KAAK,EAAE,eAAe,CAAC,CAAA;AAC7D,CAAC;AAEK,SAAU,eAAe,CAAC,MAAM,EAAA;;IAEpC,OAAO,oBAAoB,CAAC,MAAM,EAAE,KAAK,EAAE,uBAAuB,CAAC,CAAA;AACrE,CAAC;AAEK,SAAU,QAAQ,CAAC,MAAM,EAAA;;IAE7B,OAAO,oBAAoB,CAAC,MAAM,EAAE,IAAI,EAAE,gBAAgB,CAAC,CAAA;AAC7D,CAAC;AAEK,SAAU,eAAe,CAAC,MAAM,EAAA;;IAEpC,OAAO,oBAAoB,CAAC,MAAM,EAAE,IAAI,EAAE,uBAAuB,CAAC,CAAA;AACpE,CAAC;AAED;;AAEE;AACF,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAA;AACjC,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAA;AACjC;SACgB,oBAAoB,CAAC,MAAM,EAAE,UAAU,EAAE,YAAY,EAAA;;AAEnE,IAAA,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;AACrB,QAAA,OAAO,MAAM,CAAA;KACd;;IAGD,MAAM,QAAQ,GAAG,UAAU,GAAG,WAAW,GAAG,WAAW,CAAA;;IAGvD,MAAM,WAAW,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAA;;IAGxC,IAAI,WAAW,EAAE;AACf,QAAA,OAAO,WAAW,CAAA;KACnB;;IAGD,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,EAAE,YAAY,CAAC,CAAA;;AAE7C,IAAA,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAA;AAE3B,IAAA,OAAO,KAAK,CAAA;AACd;;ACrDM,SAAU,GAAG,CAAC,KAAK,EAAA;;AAEvB,IAAA,OAAO,SAAS,CAAC,KAAK,EAAE,KAAK,CAAC,CAAA;AAChC,CAAC;AAED;AAEM,SAAU,UAAU,CAAC,KAAK,EAAA;;AAE9B,IAAA,OAAO,SAAS,CAAC,KAAK,EAAE,IAAI,CAAC,CAAA;AAC/B,CAAC;AAED,SAAS,SAAS,CAAC,QAAQ,EAAE,SAAS,GAAG,KAAK,EAAA;;IAE5C,OAAO,IAAI,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAA;AACzC,CAAC;AAED,MAAM,OAAO,GAAG,CAAC,GAAG,MAAM,QAAQ,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,CAAA;AAC9D,MAAM,OAAO,CAAA;AAGQ,IAAA,QAAA,CAAA;AAAiB,IAAA,SAAA,CAAA;IAF7B,MAAM,CAAA;IACN,SAAS,GAAG,IAAI,CAAA;IACvB,WAAmB,CAAA,QAAQ,EAAS,SAAS,EAAA;;QAA1B,IAAQ,CAAA,QAAA,GAAR,QAAQ,CAAA;QAAS,IAAS,CAAA,SAAA,GAAT,SAAS,CAAA;AAG3C,QAAA,IAAI,CAAC,MAAM,GAAG,SAAS,GAAG,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAA;KACvD;;;AAID,IAAA,IAAI,KAAK,GAAA;AACP,QAAA,KAAK,CAAC,IAAI,EAAA,CAAA,yBAAoB,OAAO,CAAC,CAAA;QACtC,OAAO,IAAI,CAAC,MAAM,CAAA;KACnB;IACD,IAAI,KAAK,CAAC,QAAQ,EAAA;QAChB,IAAI,UAAU,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE;;AAEvC,YAAA,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAA;YACxB,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;YACrE,OAAO,CAAC,IAAI,EAAsB,CAAA,2BAAA,OAAO,EAAE,QAAQ,CAAC,CAAA;SACrD;KACF;AACF,CAAA;AAED,MAAM,aAAa,CAAA;AAEE,IAAA,MAAA,CAAA;AAAe,IAAA,GAAA,CAAA;IAD3B,SAAS,GAAG,IAAI,CAAA;IACvB,WAAmB,CAAA,MAAM,EAAS,GAAG,EAAA;QAAlB,IAAM,CAAA,MAAA,GAAN,MAAM,CAAA;QAAS,IAAG,CAAA,GAAA,GAAH,GAAG,CAAA;KAAI;AACzC,IAAA,IAAI,KAAK,GAAA;QACP,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;KAC7B;IACD,IAAI,KAAK,CAAC,QAAQ,EAAA;QAChB,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,QAAQ,CAAA;KACjC;AACF,CAAA;AACD;AACgB,SAAA,KAAK,CAAC,MAAM,EAAE,GAAG,EAAA;AAC/B,IAAA,OAAO,IAAI,aAAa,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;AACvC,CAAC;AAED;AACM,SAAU,MAAM,CAAC,MAAM,EAAA;IAC3B,MAAM,GAAG,GAAG,OAAO,CAAC,MAAM,CAAC,GAAG,IAAI,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,CAAA;AAC3D,IAAA,KAAK,IAAI,GAAG,IAAI,MAAM,EAAE;QACtB,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,GAAG,CAAC,CAAA;KAC9B;AACD,IAAA,OAAO,GAAG,CAAA;AACZ;;AClEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA,MAAM,eAAe,CAAA;AAIQ,IAAA,MAAA,CAAA;AAHpB,IAAA,MAAM,GAAG,IAAI,CAAA;AACb,IAAA,MAAM,CAAA;AACN,IAAA,OAAO,CAAA;IACd,WAAY,CAAA,MAAM,EAAS,MAAM,EAAA;QAAN,IAAM,CAAA,MAAA,GAAN,MAAM,CAAA;QAC/B,IAAI,CAAC,OAAO,GAAG,MAAM;;AAEnB,QAAA,MAAM,EACN;YACE,IAAI,EAAE,IAAI;YACV,SAAS,EAAE,MAAK;AACd,gBAAA,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE;AAChB,oBAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAA;AAClB,oBAAA,OAAO,CAAC,IAAI,EAAA,CAAA,2BAAoB,OAAO,CAAC,CAAA;iBACzC;aACF;AACF,SAAA,CACF,CAAA;KACF;AAED,IAAA,IAAI,KAAK,GAAA;AACP,QAAA,IAAI,IAAI,CAAC,MAAM,EAAE;YACf,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,EAAE,CAAA;AAC5B,YAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;SACpB;AACD,QAAA,KAAK,CAAC,IAAI,EAAA,CAAA,yBAAkB,OAAO,CAAC,CAAA;;;;QAMpC,OAAO,IAAI,CAAC,MAAM,CAAA;KACnB;IAED,IAAI,KAAK,CAAC,QAAQ,EAAA;AAChB,QAAA,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAA;KACtB;AACF,CAAA;AAEK,SAAU,QAAQ,CAAC,eAAe,EAAA;;AAEtC,IAAA,IAAI,MAAM,CAAA;AACV,IAAA,IAAI,MAAM,CAAA;AACV,IAAA,IAAI,UAAU,CAAC,eAAe,CAAC,EAAE;QAC/B,MAAM,GAAG,eAAe,CAAA;AACxB,QAAA,MAAM,GAAG,MAAK,GAAG,CAAA;KAClB;SAAM;AACL,QAAA,MAAM,GAAG,eAAe,CAAC,GAAG,CAAA;AAC5B,QAAA,MAAM,GAAG,eAAe,CAAC,GAAG,CAAA;KAC7B;IAED,OAAO,IAAI,eAAe,CAAC,MAAM,EAAE,MAAM,CAAC,CAAA;AAC5C;;ACpEA,IAAI,KAAK,GAAG,EAAE,CAAA;AACR,SAAU,QAAQ,CAAC,GAAG,EAAA;IAC1B,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE;;AAExB,QAAA,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAA;QACf,UAAU,EAAE,CAAA;KACb;AACH,CAAC;AAED,IAAI,cAAc,GAAG,KAAK,CAAA;AAC1B,SAAS,UAAU,GAAA;IACjB,IAAI,CAAC,cAAc,EAAE;;QAEnB,cAAc,GAAG,IAAI,CAAA;QACrB,OAAO,CAAC,OAAO,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;KACjC;AACH,CAAC;AAED,SAAS,QAAQ,GAAA;IACf,cAAc,GAAG,KAAK,CAAA;;AAGtB,IAAA,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAA;AAEjC,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACrC,QAAA,MAAM,GAAG,GAAG,KAAK,CAAC,CAAC,CAAC,CAAA;AACpB,QAAA,GAAG,EAAE,CAAA;KACN;AAED,IAAA,KAAK,CAAC,MAAM,GAAG,CAAC,CAAA;AAClB;;AC9BM,SAAU,WAAW,CAAC,GAAG,EAAA;AAC7B,IAAA,MAAM,GAAG,GAAG,GAAG,CAAC,MAAM,CAAA;AACtB,IAAA,MAAM,MAAM,GAAG,CAAC,CAAC,CAAC,CAAA;IAClB,MAAM,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;AACtB,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AAC5B,QAAA,MAAM,IAAI,GAAG,GAAG,CAAC,CAAC,CAAC,CAAA;AACnB,QAAA,IAAI,IAAI,KAAK,CAAC,EAAE;YACd,IAAI,eAAe,GAAG,MAAM,CAAC,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;AAC/C,YAAA,IAAI,GAAG,CAAC,eAAe,CAAC,GAAG,IAAI,EAAE;AAC/B,gBAAA,CAAC,CAAC,CAAC,CAAC,GAAG,eAAe,CAAA;AACtB,gBAAA,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;gBACd,SAAQ;aACT;YACD,IAAI,KAAK,GAAG,CAAC,CAAA;AACb,YAAA,IAAI,GAAG,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAA;AAC3B,YAAA,OAAO,KAAK,GAAG,GAAG,EAAE;AAClB,gBAAA,IAAI,MAAM,GAAG,CAAC,CAAC,KAAK,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAA;gBACpC,IAAI,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,EAAE;AAC9B,oBAAA,KAAK,GAAG,MAAM,GAAG,CAAC,CAAA;iBACnB;qBAAM;oBACL,GAAG,GAAG,MAAM,CAAA;iBACb;aACF;YACD,IAAI,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE;AAC7B,gBAAA,IAAI,KAAK,GAAG,CAAC,EAAE;oBACb,CAAC,CAAC,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,CAAA;iBACzB;AACD,gBAAA,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,CAAA;aAClB;SACF;KACF;AACD,IAAA,IAAI,MAAM,GAAG,MAAM,CAAC,MAAM,CAAA;IAC1B,IAAI,IAAI,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;AAC7B,IAAA,OAAO,MAAM,EAAE,GAAG,CAAC,EAAE;AACnB,QAAA,MAAM,CAAC,MAAM,CAAC,GAAG,IAAI,CAAA;AACrB,QAAA,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAA;KACf;AACD,IAAA,OAAO,MAAM,CAAA;AACf;;AC9BM,SAAU,cAAc,CAAC,aAAa,EAAA;AAC1C,IAAA,MAAM,EACJ,MAAM,EAAE,UAAU,EAClB,MAAM,EAAE,UAAU,EAClB,SAAS,EAAE,aAAa,EACxB,aAAa,EAAE,iBAAiB,EAChC,UAAU,EAAE,cAAc,EAC1B,aAAa,EAAE,iBAAiB,EAChC,OAAO,EAAE,WAAW,EACpB,cAAc,EAAE,kBAAkB,EAClC,WAAW,EAAE,eAAe,GAC7B,GAAG,aAAa,CAAA;AAEjB,IAAA,MAAM,iBAAiB,GAAG,CAAC,QAAQ,EAAE,SAAS,KAAI;;AAEhD,QAAA,QAAQ,CAAC,MAAM,GAAG,MAAM,CACtB,SAAS,eAAe,GAAA;;AAEtB,YAAA,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE;;;AAGvB,gBAAA,IAAI,UAAU,GAAG,QAAQ,CAAC,KAAK,CAAA;AAE/B,gBAAA,IAAI,OAAO,IAAI,QAAQ,CAAC,OAAO,GAAG,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAA;AAC9D,gBAAA,KAAK,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,CAAC,CAAA;AAC/B,gBAAA,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAA;aAC1B;iBAAM;;AAEL,gBAAA,MAAM,QAAQ,GAAG,QAAQ,CAAC,OAAO,CAAA;AACjC,gBAAA,IAAI,UAAU,GAAG,QAAQ,CAAC,KAAK,CAAA;gBAC/B,MAAM,QAAQ,GAAG,QAAQ,CAAC,MAAM,CAAC,UAAU,CAAC,CAAA;AAC5C,gBAAA,KAAK,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,CAAC,CAAA;aACrC;AACH,SAAC,EACD;AACE,YAAA,SAAS,EAAE,QAAQ;AACpB,SAAA,CACF,CAAA;AACH,KAAC,CAAA;AAED,IAAA,MAAM,cAAc,GAAG,CAAC,YAAY,EAAE,SAAS,KAAI;;;AAGjD,QAAA,MAAM,QAAQ,IAAI,YAAY,CAAC,SAAS;AACtC,YAAA,uBAAuB,CAAC,YAAY,CAAC,CAAC,CAAA;;QAExC,cAAc,CAAC,QAAQ,CAAC,CAAA;;AAExB,QAAA,iBAAiB,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAA;AACxC,KAAC,CAAA;IAED,MAAM,gBAAgB,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,SAAS,KAAI;AAC7C,QAAA,IAAI,EAAE,IAAI,IAAI,EAAE;;AAEd,YAAA,cAAc,CAAC,EAAE,EAAE,SAAS,CAAC,CAAA;SAG9B;AACH,KAAC,CAAA;AAED,IAAA,SAAS,aAAa,CAAC,QAAQ,EAAE,SAAS,EAAA;AACxC,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;;YAExC,IAAI,KAAK,GAAG,cAAc,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;AACvC,YAAA,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,SAAS,CAAC,CAAA;SAC9B;KACF;AAED,IAAA,SAAS,YAAY,CAAC,KAAK,EAAE,SAAS,EAAE,MAAM,EAAA;;QAE5C,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,KAAK,CAAA;AAClD,QAAA,IAAI,EAAE,IAAI,KAAK,CAAC,EAAE,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC,CAAA;QAC7C,IAAI,KAAK,EAAE;AACT,YAAA,KAAK,MAAM,GAAG,IAAI,KAAK,EAAE;AACvB,gBAAA,aAAa,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAA;aACzC;SACF;;QAED,IAAI,SAAS,GAA2B,CAAA,iCAAE;AACxC,YAAA,kBAAkB,CAAC,EAAE,EAAE,QAAQ,CAAC,CAAA;SACjC;;QAGD,IAAI,SAAS,GAA4B,EAAA,kCAAE;AACzC,YAAA,aAAa,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAA;SAC5B;AACD,QAAA,UAAU,CAAC,EAAE,EAAE,SAAS,EAAE,MAAM,CAAC,CAAA;KAClC;AAED,IAAA,SAAS,UAAU,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE,EAAA;AACxC,QAAA,IAAI,QAAQ,KAAK,QAAQ,EAAE;AACzB,YAAA,KAAK,IAAI,GAAG,IAAI,QAAQ,EAAE;AACxB,gBAAA,MAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;AAC1B,gBAAA,MAAM,IAAI,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAA;AAC1B,gBAAA,IAAI,IAAI,KAAK,IAAI,EAAE;oBACjB,aAAa,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,CAAC,CAAA;iBACnC;aACF;AACD,YAAA,KAAK,MAAM,GAAG,IAAI,QAAQ,EAAE;AAC1B,gBAAA,IAAI,EAAE,GAAG,IAAI,QAAQ,CAAC,EAAE;AACtB,oBAAA,aAAa,CAAC,EAAE,EAAE,GAAG,EAAE,QAAQ,CAAC,GAAG,CAAC,EAAE,IAAI,CAAC,CAAA;iBAC5C;aACF;SACF;KACF;AACD,IAAA,SAAS,eAAe,CAAC,QAAQ,EAAE,EAAE,GAAG,IAAI,EAAA;AAC1C,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACxC,YAAA,OAAO,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;SACrB;KACF;AACD,IAAA,SAAS,kBAAkB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAA;AACpC,QAAA,IAAI,CAAC,GAAG,CAAC,CAAA;AACT,QAAA,IAAI,EAAE,GAAG,EAAE,CAAC,MAAM,GAAG,CAAC,CAAA;AACtB,QAAA,IAAI,EAAE,GAAG,EAAE,CAAC,MAAM,GAAG,CAAC,CAAA;;;QAKtB,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE;AACzB,YAAA,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAA;AAChB,YAAA,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAA;AAChB,YAAA,IAAI,eAAe,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE;AAC3B,gBAAA,KAAK,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAA;aAClB;iBAAM;gBACL,MAAK;aACN;AACD,YAAA,CAAC,EAAE,CAAA;SACJ;;QAED,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,EAAE;AACzB,YAAA,MAAM,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAA;AACjB,YAAA,MAAM,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAA;AACjB,YAAA,IAAI,eAAe,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE;AAC3B,gBAAA,KAAK,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAA;aAClB;iBAAM;gBACL,MAAK;aACN;AACD,YAAA,EAAE,EAAE,CAAA;AACJ,YAAA,EAAE,EAAE,CAAA;SACL;;AAGD,QAAA,IAAI,CAAC,GAAG,EAAE,EAAE;;AAEV,YAAA,IAAI,CAAC,IAAI,EAAE,EAAE;AACX,gBAAA,OAAO,CAAC,IAAI,EAAE,EAAE;;AAEd,oBAAA,MAAM,OAAO,GAAG,EAAE,GAAG,CAAC,CAAA;oBAEtB,MAAM,MAAM,GAAG,OAAO,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,OAAO,CAAC,CAAC,EAAE,GAAG,IAAI,CAAA;;AAE1D,oBAAA,KAAK,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,EAAE,MAAM,CAAC,CAAA;AAC9B,oBAAA,CAAC,EAAE,CAAA;iBACJ;aACF;SACF;AAAM,aAAA,IAAI,CAAC,GAAG,EAAE,EAAE;;AAEjB,YAAA,OAAO,CAAC,IAAI,EAAE,EAAE;AACd,gBAAA,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAA;AACd,gBAAA,CAAC,EAAE,CAAA;aACJ;SACF;aAAM;;YAEL,IAAI,EAAE,GAAG,CAAC,CAAA;YACV,IAAI,EAAE,GAAG,CAAC,CAAA;;AAGV,YAAA,MAAM,gBAAgB,GAAG,IAAI,GAAG,EAAE,CAAA;AAElC,YAAA,KAAK,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;;AAE7B,gBAAA,MAAM,UAAU,GAAG,EAAE,CAAC,CAAC,CAAC,CAAA;gBACxB,gBAAgB,CAAC,GAAG,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC,CAAA;aACxC;;AAED,YAAA,MAAM,WAAW,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAA;AAC/B,YAAA,MAAM,qBAAqB,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAA;;AAE5D,YAAA,KAAK,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,EAAE,EAAE,CAAC,EAAE,EAAE;AAC7B,gBAAA,MAAM,QAAQ,GAAG,EAAE,CAAC,CAAC,CAAC,CAAA;gBACtB,IAAI,QAAQ,GAAG,gBAAgB,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAA;AACjD,gBAAA,IAAI,QAAQ,KAAK,SAAS,EAAE;;oBAE1B,OAAO,CAAC,QAAQ,CAAC,CAAA;iBAClB;qBAAM;;oBAEL,qBAAqB,CAAC,QAAQ,GAAG,EAAE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;oBAC5C,KAAK,CAAC,QAAQ,EAAE,EAAE,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC,CAAA;iBAClC;aACF;YACD,IAAI,0BAA0B,GAAG,WAAW,CAAC,qBAAqB,CAAC,CAAA;AACnE,YAAA,IAAI,CAAC,GAAG,0BAA0B,CAAC,MAAM,GAAG,CAAC,CAAA;AAC7C,YAAA,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAA;AACvC,YAAA,KAAK,IAAI,CAAC,GAAG,WAAW,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;AACzC,gBAAA,IAAI,YAAY,GAAG,CAAC,GAAG,EAAE,CAAA;AACzB,gBAAA,IAAI,KAAK,GAAG,EAAE,CAAC,YAAY,CAAC,CAAA;AAC5B,gBAAA,MAAM,MAAM,GACV,YAAY,GAAG,CAAC,GAAG,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC,MAAM;sBACpC,EAAE,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,EAAE;sBACvB,IAAI,CAAA;AACV,gBAAA,IAAI,qBAAqB,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;oBACjC,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,CAAC,CAAA;iBAC/B;qBAAM;AACL,oBAAA,IAAI,CAAC,IAAI,0BAA0B,CAAC,CAAC,CAAC,EAAE;wBACtC,UAAU,CAAC,KAAK,CAAC,EAAE,EAAE,EAAE,EAAE,MAAM,CAAC,CAAA;qBACjC;yBAAM;AACL,wBAAA,CAAC,EAAE,CAAA;qBACJ;iBACF;aACF;SACF;KACF;AACD,IAAA,SAAS,UAAU,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAA;AAC5B,QAAA,MAAM,EAAE,GAAG,EAAE,CAAC,QAAQ,CAAA;AACtB,QAAA,MAAM,EAAE,GAAG,EAAE,CAAC,QAAQ,CAAA;AAEtB,QAAA,MAAM,aAAa,GAAG,EAAE,CAAC,SAAS,CAAA;AAClC,QAAA,MAAM,SAAS,GAAG,EAAE,CAAC,SAAS,CAAA;;QAI9B,IAAI,SAAS,GAA2B,CAAA,iCAAE;;YAExC,IAAI,aAAa,GAA4B,EAAA,kCAAE;AAC7C,gBAAA,eAAe,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;aACxB;;AAGD,YAAA,IAAI,EAAE,KAAK,EAAE,EAAE;AACb,gBAAA,kBAAkB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;aAC3B;SACF;aAAM;;YAEL,IAAI,aAAa,GAA4B,EAAA,kCAAE;;gBAE7C,IAAI,SAAS,GAA4B,EAAA,kCAAE;AACzC,oBAAA,kBAAkB,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAA;iBAC/B;qBAAM;;AAEL,oBAAA,kBAAkB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;iBAC3B;aACF;iBAAM;;gBAEL,IAAI,aAAa,GAA2B,CAAA,iCAAE;AAC5C,oBAAA,kBAAkB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;iBAC3B;;gBAED,IAAI,SAAS,GAA4B,EAAA,kCAAE;AACzC,oBAAA,aAAa,CAAC,EAAE,EAAE,EAAE,CAAC,CAAA;iBACtB;aACF;SACF;KACF;AACD,IAAA,SAAS,YAAY,CAAC,EAAE,EAAE,EAAE,EAAE,SAAS,EAAA;QACrC,IAAI,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAA;AACxB,QAAA,MAAM,QAAQ,GAAG,EAAE,CAAC,KAAK,IAAI,EAAE,CAAA;AAC/B,QAAA,MAAM,QAAQ,GAAG,EAAE,CAAC,KAAK,IAAI,EAAE,CAAA;;AAG/B,QAAA,UAAU,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE,CAAC,CAAA;;AAElC,QAAA,UAAU,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAA;KACvB;IACD,SAAS,cAAc,CAAC,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,MAAM,EAAA;AAC/C,QAAA,IAAI,EAAE,IAAI,IAAI,EAAE;AACd,YAAA,YAAY,CAAC,EAAE,EAAE,SAAS,EAAE,MAAM,CAAC,CAAA;SACpC;aAAM;AACL,YAAA,YAAY,CAAC,EAAE,EAAE,EAAa,CAAC,CAAA;SAChC;KACF;IACD,MAAM,WAAW,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,SAAS,KAAI;AACxC,QAAA,IAAI,EAAE,IAAI,IAAI,EAAE;AACd,YAAA,UAAU,EAAE,EAAE,CAAC,EAAE,GAAG,cAAc,CAAC,EAAE,CAAC,QAAQ,CAAC,GAAG,SAAS,CAAC,CAAA;SAC7D;AACH,KAAC,CAAA;;AAGD,IAAA,SAAS,eAAe,CAAC,EAAE,EAAE,EAAE,EAAA;AAC7B,QAAA,OAAO,EAAE,CAAC,IAAI,KAAK,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,GAAG,CAAA;KAChD;;IAED,SAAS,OAAO,CAAC,EAAE,EAAA;AACjB,QAAA,UAAU,CAAC,EAAE,CAAC,EAAE,CAAC,CAAA;KAClB;AAED,IAAA,MAAM,KAAK,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,MAAM,GAAG,IAAI,KAAI;;AAEjD,QAAA,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,EAAE,CAAA;;QAG9B,IAAI,EAAE,IAAI,CAAC,eAAe,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE;YAClC,MAAM,GAAG,eAAe,CAAC,EAAE,CAAC,EAAE,CAAC,CAAA;YAC/B,OAAO,CAAC,EAAE,CAAC,CAAA;AACX,YAAA,EAAE,GAAG,IAAI,CAAA;SACV;QAED,QAAQ,IAAI;AACV,YAAA,KAAK,IAAI;AACP,gBAAA,WAAW,CAAC,EAAE,EAAE,EAAE,EAAE,SAAS,CAAC,CAAA;gBAC9B,MAAK;AACP,YAAA;gBACE,IAAI,SAAS,GAAqB,CAAA,2BAAE;;oBAElC,cAAc,CAAC,EAAE,EAAE,EAAE,EAAE,SAAS,EAAE,MAAM,CAAC,CAAA;iBAC1C;qBAAM,IAAI,SAAS,GAAgC,CAAA,sCAAE;;AAEpD,oBAAA,gBAAgB,CAAC,EAAE,EAAE,EAAE,EAAE,SAAS,CAAC,CAAA;iBACpC;gBACD,MAAK;SACR;AACH,KAAC,CAAA;AAED,IAAA,MAAM,MAAM,GAAG,CAAC,KAAK,EAAE,SAAS,KAAI;;AAElC,QAAA,KAAK,CAAC,IAAI,EAAE,KAAK,EAAE,SAAS,CAAC,CAAA;AAC/B,KAAC,CAAA;;IAED,OAAO;AACL,QAAA,SAAS,EAAE,YAAY,CAAC,MAAM,CAAC;KAChC,CAAA;AACH;;SCrUgB,CAAC,CAAC,IAAI,EAAE,cAAc,EAAE,QAAQ,EAAA;AAC9C,IAAA,MAAM,CAAC,GAAG,SAAS,CAAC,MAAM,CAAA;AAE1B,IAAA,IAAI,CAAC,IAAI,CAAC,EAAE;;QAEV,IAAI,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,cAAc,CAAC,EAAE;AACxD,YAAA,IAAI,OAAO,CAAC,cAAc,CAAC,EAAE;;gBAE3B,OAAO,WAAW,CAAC,IAAI,EAAE,IAAI,EAAE,CAAC,cAAc,CAAC,CAAC,CAAA;aACjD;iBAAM;;AAEL,gBAAA,OAAO,WAAW,CAAC,IAAI,EAAE,cAAc,CAAC,CAAA;aACzC;SACF;aAAM;;YAEL,OAAO,WAAW,CAAC,IAAI,EAAE,IAAI,EAAE,cAAc,CAAC,CAAA;SAC/C;KACF;SAAM;AACL,QAAA,IAAI,CAAC,GAAG,CAAC,EAAE;;AAET,YAAA,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAA;SACpD;aAAM,IAAI,CAAC,KAAK,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,EAAE;AACvC,YAAA,QAAQ,GAAG,CAAC,QAAQ,CAAC,CAAA;SACtB;QACD,OAAO,WAAW,CAAC,IAAI,EAAC,cAAc,EAAC,QAAQ,CAAC,CAAA;KACjD;AACH;;ACxBM,MAAA,aAAa,GAAG,MAAM,CAAC,EAAE,SAAS,EAAE,EAAE,OAAO,EAAC;SAIpC,SAAS,CAAC,aAAa,EAAE,SAAS,GAAG,IAAI,EAAA;;AAEvD,IAAA,MAAM,GAAG,GAAG,cAAc,CAAC,aAAa,CAAC,CAAC,SAAS,CAAC,aAAa,EAAE,SAAS,CAAC,CAAA;AAC7E,IAAA,IAAI,EAAE,KAAK,EAAE,GAAG,GAAG,CAAA;AACnB,IAAA,GAAG,CAAC,KAAK,GAAG,UAAU,SAAS,EAAA;;AAE7B,QAAA,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAC,CAAA;AAC7C,QAAA,SAAS,CAAC,SAAS,GAAG,EAAE,CAAA;QACxB,KAAK,CAAC,SAAS,CAAC,CAAA;;AAElB,KAAC,CAAA;AACD,IAAA,OAAO,GAAG,CAAA;AACZ;;;;"}