{"version":3,"file":"reactivity.global.js","sources":["../../shared/src/index.ts","../src/effect.ts","../src/baseHandlers.ts","../src/reactive.ts","../src/ref.ts","../src/computed.ts"],"sourcesContent":["export const isObject = (value) => typeof value == 'object' && value !== null //判断是否是对象\r\n\r\nexport const extend = Object.assign //对象合并\r\n\r\nexport const isArray = Array.isArray\r\nexport const isFunction = (value) => typeof value == 'function'\r\nexport const isNumber = (value) => typeof value == 'number'\r\nexport const isString = (value) => typeof value == 'string'\r\n\r\nexport const isIntegerKey = (key) => parseInt(key) + '' === key //判断是不是数字\r\n\r\nlet hasOwnProperty = Object.prototype.hasOwnProperty\r\nexport const hasOwn = (target, key) => hasOwnProperty.call(target, key) //判断key是不是target属性\r\n\r\nexport const hasChanged = (oldValue, value) => oldValue !== value\r\n","import { isArray, isIntegerKey } from '@vue/shared'\r\nimport { TriggerOrTypes } from './operators'\r\n\r\nexport function effect(fn, options: any = {}) {\r\n  //effect变成响应式的，数据变化重新执行\r\n\r\n  const effect = createReactiveEffect(fn, options)\r\n\r\n  if (!options.lazy) {\r\n    effect() //默认会自动执行一次\r\n  }\r\n  return effect //有点类似vue2的watcher\r\n}\r\n\r\nlet uid = 0 //每个effect都有一个id\r\nlet activeEffect //存储当前effect，像是vue2全局存储的watcher一样\r\nconst effectStack = [] //熟悉的watcher栈，先入后出，先执行最后一个\r\nfunction createReactiveEffect(fn, options) {\r\n  const effect = function reactiveEffect() {\r\n    if (!effectStack.includes(effect)) {\r\n      //先看看栈里有没有一样的，有过就不执行了(防止 变量++ 这样的情况等)\r\n      try {\r\n        effectStack.push(effect) //通过全局栈，拿到effect本身存入栈\r\n        activeEffect = effect //通过全局变量，拿到effect本身，在track就能用effect了\r\n        return fn()\r\n      } finally {\r\n        effectStack.pop() //执行完抛出栈\r\n        activeEffect = effectStack[effectStack.length - 1] //重新指向最外一个\r\n      }\r\n    }\r\n  }\r\n  effect.id = uid++ //effect的id\r\n  effect._isEffect = true //标识是响应式effect\r\n  effect.raw = fn //保留对应的原函数\r\n  effect.options = options //保存用户选项\r\n  return effect\r\n}\r\n\r\n//track类似vue2的dep\r\nconst targetMap = new WeakMap()\r\nexport function track(target, type, key) {\r\n  if (activeEffect === undefined) {\r\n    return\r\n  }\r\n  // 往当前weaWap查找有没有相同的键值对\r\n  let depsMap = targetMap.get(target)\r\n  if (!depsMap) {\r\n    //没有相同的，设立一个键，并且值是一个map\r\n    targetMap.set(target, (depsMap = new Map()))\r\n  }\r\n  let dep = depsMap.get(key)\r\n  if (!dep) {\r\n    //往刚刚从weakmap取出的map查找有没有相同的键值对\r\n    depsMap.set(key, (dep = new Set())) //没有相同的，设立一个键，并且值是一个set\r\n  }\r\n  //如果map里找到的set里没有当前effect，那就加入\r\n  if (!dep.has(activeEffect)) {\r\n    dep.add(activeEffect)\r\n  }\r\n}\r\n\r\nexport function trigger(target, type, key?, newValue?, oldValue?) {\r\n  //没收集过，直接返回\r\n  const depsMap = targetMap.get(target)\r\n  if (!depsMap) return\r\n\r\n  //把所有要执行的effect放到集合，最后一起执行\r\n  const effects = new Set()\r\n  const add = (effectToAdd) => {\r\n    if (effectToAdd) {\r\n      effectToAdd.forEach((effect) => effects.add(effect))\r\n    }\r\n  }\r\n  //对修改数组的length属性特殊处理\r\n  if (key === 'length' && isArray(target)) {\r\n    depsMap.forEach((dep, key) => {\r\n      debugger\r\n      console.log(depsMap, dep, key)\r\n      if (key === 'length' || key > newValue) {\r\n        //如果依赖收集过的值是‘length’或者[2]这样的，且修改的length小于了收集过的索引\r\n        add(dep) //加到集合\r\n      }\r\n    })\r\n  } else {\r\n    if (key !== undefined) {\r\n      //修改\r\n      add(depsMap.get(key))\r\n    }\r\n    switch (type) {\r\n      case TriggerOrTypes.ADD:\r\n        if (Array.isArray(target) && isIntegerKey(key)) {\r\n          //如果是通过下标索引添加，注意只能是添加，那就通过length触发\r\n          add(depsMap.get('length'))\r\n        }\r\n    }\r\n  }\r\n  effects.forEach((effect: any) => {\r\n    if (effect.options.scheduler) {\r\n      effect.options.scheduler()\r\n    } else {\r\n      effect()\r\n    }\r\n  })\r\n}\r\n","//实现new Proxy(target,baseHandler)的各handler\r\n\r\nimport { extend, hasChanged, hasOwn, isArray, isIntegerKey, isObject } from '@vue/shared'\r\nimport { reactive, readonly } from './reactive'\r\nimport { track, trigger } from './effect'\r\nimport { TrackOrTypes, TriggerOrTypes } from './operators'\r\n\r\n/*\r\n后续Object的方法会迁移到Reflect.getProptypeof()\r\nReflect的操作会有返回值，会报异常\r\n新es6语法\r\n\r\ntarget：原对象\r\nkey：属性\r\nreceiver：代理对象本身\r\n*/\r\n\r\nfunction createGetter(isReadonly = false, isShallow = false) {\r\n  //根据是不是只可读和是不是浅的造出不同的用于代理的get方法\r\n  return function get(target, key, receiver) {\r\n    const res = Reflect.get(target, key, receiver)\r\n\r\n    if (!isReadonly) {\r\n      //不是只读的，进行依赖收集\r\n\r\n      //传递三个参数，第二个表示操作的类型\r\n      track(target, TrackOrTypes.GET, key)\r\n    }\r\n    if (isShallow) {\r\n      //是浅的\r\n      return res\r\n    }\r\n    // ！！！！！！！vue3比vue2性能好就是vue3用懒代理，取到了再递归代理，没取到不理\r\n    if (isObject(res)) {\r\n      //如果是对象，还得进去循环一下\r\n      return isReadonly ? readonly(res) : reactive(res)\r\n    }\r\n\r\n    return res\r\n  }\r\n}\r\nfunction createSetter(isShallow = false) {\r\n  //根据是不是只可读和是不是浅的造出不同的用于代理的set方法\r\n  return function set(target, key, value, receiver) {\r\n    const oldValue = target[key] //获取老值\r\n\r\n    let hadKey=isArray(target) && isIntegerKey(key)\r\n      ? Number(key) < target.length\r\n      : hasOwn(target, key) //看看是不是数组，并且通过索引修改,如果是那就比比长度和下标，看看是新增还是修改，如果不是数组那就是对象，看看有没有这个属性。这段代码判断是不是更新\r\n\r\n    const result = Reflect.set(target, key, value, receiver)\r\n\r\n    if(!hadKey){//新增\r\n      trigger(target,TriggerOrTypes.ADD,key,value)\r\n    }else if(hasChanged(oldValue,value)){//修改\r\n      trigger(target,TriggerOrTypes.SET,key,value,oldValue)\r\n    }\r\n\r\n    return result\r\n  }\r\n}\r\n\r\nconst get = createGetter(false, false) //可读可写，深\r\nconst shallowGet = createGetter(false, true) //可读可写，浅\r\nconst readonlyGet = createGetter(true, false) //只可读，深\r\nconst shallowReadonlyGet = createGetter(true, true) //只可读，浅\r\n\r\nconst set = createSetter(false) //可读可写，深\r\nconst shallowSet = createSetter(true) //可读可写，浅\r\n\r\nexport const mutableHandlers = {\r\n  get,\r\n  set,\r\n}\r\nexport const shallowReactiveHandlers = {\r\n  get: shallowGet,\r\n  set: shallowSet,\r\n}\r\nlet readonlyObj = {\r\n  set: (target, key) => {\r\n    console.warn(`set on key ${key} failed`)\r\n  },\r\n}\r\n//set都是警告，直接合并对象\r\nexport const readOnlyHandlers = extend(\r\n  {\r\n    get: readonlyGet,\r\n  },\r\n  readonlyObj\r\n)\r\nexport const shallowReadonlyHandlers = extend(\r\n  {\r\n    get: shallowReadonlyGet,\r\n  },\r\n  readonlyObj\r\n)\r\n","import { isObject } from '@vue/shared'\r\n\r\nimport {\r\n  mutableHandlers,\r\n  shallowReactiveHandlers,\r\n  readOnlyHandlers,\r\n  shallowReadonlyHandlers,\r\n} from './baseHandlers'\r\n\r\nexport function reactive(target) {\r\n  //可读可写，深度响应式\r\n  return createReactiveObject(target, false, mutableHandlers)\r\n}\r\n\r\nexport function shallowReactive(target) {\r\n  //可读可写，浅度响应式\r\n  return createReactiveObject(target, false, shallowReactiveHandlers)\r\n}\r\n\r\nexport function readonly(target) {\r\n  //仅可读，深度响应式\r\n  return createReactiveObject(target, true, readOnlyHandlers)\r\n}\r\n\r\nexport function shallowReadonly(target) {\r\n  //仅可读，浅度响应式\r\n  return createReactiveObject(target, true, shallowReadonlyHandlers)\r\n}\r\n\r\n/*\r\n  如果一个对象只被WeakMap引用就会垃圾回收，不会造成内存泄，且键能是对象\r\n*/\r\nconst reactiveMap = new WeakMap() //存放可读写的的数据\r\nconst readonlyMap = new WeakMap() //存放只可读的数据\r\n// 函数柯里化，不同要求，不同参数，不同处理\r\nexport function createReactiveObject(target, isReadonly, baseHandlers) {\r\n  //reactive只能拦截对象\r\n  if (!isObject(target)) {\r\n    return target\r\n  }\r\n\r\n  //根据参数判断需要用到哪个Map\r\n  const proxyMap = isReadonly ? readonlyMap : reactiveMap\r\n\r\n  //判断一下当前需要代理的数据有没有被代理过\r\n  const exisitProxy = proxyMap.get(target)\r\n\r\n  //代理过直接返回\r\n  if (exisitProxy) {\r\n    return exisitProxy\r\n  }\r\n\r\n  //响应式代理核心 如果被代理过就不要再代理\r\n  const proxy = new Proxy(target, baseHandlers)\r\n  //放入对应Map\r\n  proxyMap.set(target, proxy)\r\n\r\n  return proxy\r\n}\r\n","import { hasChanged, isArray, isObject } from '@vue/shared'\r\nimport { track, trigger } from './effect'\r\nimport { TrackOrTypes, TriggerOrTypes } from './operators'\r\nimport { reactive } from './reactive'\r\n\r\nexport function ref(value) {\r\n  //深包装\r\n  return createRef(value, false)\r\n}\r\n\r\n//ref和reactive的区别，ref用defineProperty，reactive用proxy，ref的本质就是包装成对象\r\n\r\nexport function shallowRef(value) {\r\n  //浅包装\r\n  return createRef(value, true)\r\n}\r\n\r\nfunction createRef(rawValue, isShallow = false) {\r\n  //值和是否是浅的\r\n  return new RefImpl(rawValue, isShallow) //返回一个RefImpl包装的对象\r\n}\r\n\r\nconst convert = (val) => (isObject(val) ? reactive(val) : val)\r\nclass RefImpl {\r\n  public _value //ts声明一个属性\r\n  public __v_isRef = true\r\n  constructor(public rawValue, public isShallow) {\r\n    //public标识属性放大到了实例上\r\n\r\n    this._value = isShallow ? rawValue : convert(rawValue) //把值放到_value上，方便get，set统一操作\r\n  }\r\n\r\n  // get和set本质上就是defineProperty\r\n  //value其实就相当于对象的key\r\n  get value() {\r\n    track(this, TrackOrTypes.GET, 'value') //依赖收集\r\n    return this._value\r\n  }\r\n  set value(newValue) {\r\n    if (hasChanged(newValue, this.rawValue)) {\r\n      //判断新老值是否变化\r\n      this.rawValue = newValue\r\n      this._value = this.isShallow ? this.rawValue : convert(this.rawValue)\r\n      trigger(this, TriggerOrTypes.SET, 'value', newValue) //更新依赖内容\r\n    }\r\n  }\r\n}\r\n\r\nclass ObjectRefImpl {\r\n  public __v_isRef = true\r\n  constructor(public target, public key) {}\r\n  get value() {\r\n    return this.target[this.key]\r\n  }\r\n  set value(newValue) {\r\n    this.target[this.key] = newValue\r\n  }\r\n}\r\n//把对象的key转换成ref类型\r\nexport function toRef(target, key) {\r\n  return new ObjectRefImpl(target, key)\r\n}\r\n\r\n// 一次性把多个key转换成ref\r\nexport function toRefs(object) {\r\n  const ret = isArray(object) ? new Array(object.length) : {}\r\n  for (let key in object) {\r\n    ret[key] = toRef(object, key)\r\n  }\r\n  return ret\r\n}\r\n","import { isFunction } from '@vue/shared'\r\nimport { effect, track, trigger } from './effect'\r\nimport { TrackOrTypes, TriggerOrTypes } from './operators'\r\n\r\n//计算属性其实相当于是一个effect，getter的内容更新了，effect就要在调用的时候重新执行\r\n\r\n// effect(()=>{\r\n//   console.log(myage)\r\n// })\r\n\r\n// 二者极度地相似，只不过myAge不需要立即执行，且只有再次取值才重新更新计算属性的值\r\n\r\n// myAge=computed((){\r\n//   return myage  \r\n// })\r\n\r\nclass ComputedRefImpl {\r\n  public _dirty = true //默认取值不要用缓存\r\n  public _value\r\n  public _effect\r\n  constructor(getter, public setter) {\r\n    this._effect = effect(\r\n      //计算属性创建一个effect，effect返回值就是getter\r\n      getter,\r\n      {\r\n        lazy: true, //不要默认执行effect\r\n        scheduler: () => {\r\n          if (!this._dirty) {\r\n            this._dirty = true//计算属性的值需要修改，在get的时候重新通过effect的返回值获取新值\r\n            trigger(this,TriggerOrTypes.SET,'value')//执行计算属性本身依赖的更新\r\n          }\r\n        },\r\n      }\r\n    )\r\n  }\r\n\r\n  get value() {\r\n    if (this._dirty) {\r\n      this._value = this._effect() //取值执行effect,进行依赖收集，effect执行getter以后返回的值就是计算属性的结果\r\n      this._dirty = false//取到一次值以后，以后计算属性取值直接给，不需要再走effect\r\n    }\r\n    track(this,TrackOrTypes.GET,'value')//计算属性本身被effect也要依赖收集\r\n\r\n    // effect(()=>{\r\n      // console.log(计算属性)\r\n    // })\r\n\r\n    return this._value\r\n  }\r\n\r\n  set value(newValue) {\r\n    this.setter(newValue)\r\n  }\r\n}\r\n\r\nexport function computed(getterOrOptions) {\r\n  // 用户传递的getterOrOptions里可以是一个有返回值作为conputed的结果的函数,或者取值修改方法getter和setter\r\n  let getter\r\n  let setter\r\n  if (isFunction(getterOrOptions)) {\r\n    getter = getterOrOptions\r\n    setter = () => {}\r\n  } else {\r\n    getter = getterOrOptions.get\r\n    setter = getterOrOptions.set\r\n  }\r\n\r\n  return new ComputedRefImpl(getter, setter) //包装成ref模样\r\n}\r\n"],"names":[],"mappings":"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"}